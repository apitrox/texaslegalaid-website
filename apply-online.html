<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- Primary Meta Tags -->
  <title>Apply Online for Free Legal Help | Texas Legal Aid</title>
  <meta name="title" content="Apply Online for Free Legal Help | Texas Legal Aid">
  <meta name="description"
    content="Start your free legal aid request. Tell us about your situation and we'll connect you with qualified legal aid providers who can help.">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://texaslegalaid.org/apply-online.html">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://texaslegalaid.org/apply-online.html">
  <meta property="og:title" content="Apply Online for Free Legal Help | Texas Legal Aid">
  <meta property="og:description"
    content="Start your free legal aid request. Tell us about your situation and we'll connect you with qualified legal aid providers.">
  <meta property="og:image" content="https://texaslegalaid.org/images/og-image.png">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2D5A7B">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="images/TLA_Favicon_Solid_White.png">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#E8F2F8',
              100: '#D0E4F2',
              200: '#B8D4E8',
              300: '#9DB4C7',
              400: '#778DA9',
              500: '#415A77',
              600: '#2D5A7B',
              700: '#1B263B',
              800: '#0D1B2A',
            },
            secondary: {
              100: '#FDF8E8',
              200: '#F5E4B8',
              300: '#EBD095',
              400: '#E0BC74',
              500: '#D4A853',
            },
          },
          fontFamily: {
            display: ['-apple-system', 'BlinkMacSystemFont', '"SF Pro Display"', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', 'sans-serif'],
            body: ['-apple-system', 'BlinkMacSystemFont', '"SF Pro Text"', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', 'sans-serif'],
          },
        },
      },
    }
  </script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/custom.css">
</head>

<body class="font-body text-gray-800 bg-gray-50">
  <!-- Skip Link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Navigation -->
  <nav class="navbar" aria-label="Main navigation">
    <div class="container">
      <div class="flex items-center justify-between">
        <!-- Logo removed from navbar per design -->

        <button class="nav-toggle lg:hidden" type="button" aria-expanded="false" aria-controls="nav-menu"
          aria-label="Toggle navigation">
          <span class="nav-toggle-icon" aria-hidden="true"></span>
        </button>

        <div id="nav-menu" class="nav-menu flex-col lg:flex-row items-center gap-4 lg:gap-8">
          <!-- Phone Number moved to left of Home link -->
          <a href="tel:+15129942800"
            class="nav-link flex items-center gap-2 text-xl lg:text-2xl font-bold text-primary-700 hover:text-primary-900 border-b-0"
            aria-label="Text or Call us at 512-994-2800">
            <svg class="w-6 h-6 stroke-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
            <svg class="w-6 h-6 stroke-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
            512-994-2800
          </a>

          <a href="index.html" class="nav-link">Home</a>
          <a href="apply-online.html" class="nav-link active" aria-current="page">Apply Online</a>
          <a href="my-cases.html" class="nav-link">My Cases</a>
          <a href="resources.html" class="nav-link">Resources</a>
        </div>

        <div class="hidden lg:flex items-center gap-4">
          <a href="portal/index.html"
            class="btn btn-outline text-white border-white hover:bg-white hover:text-primary-700">Provider Portal</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main id="main-content">
    <!-- Page Header -->
    <section class="hero hero-bg-woman-porch py-12">
      <div class="container">
        <h1 class="text-2xl md:text-3xl font-bold text-white mb-2">Apply Online for Free Legal Help</h1>
        <p class="opacity-90">Tell us about your situation and we'll connect you with a legal aid provider who can help.
        </p>
      </div>
    </section>

    <!-- Form Section -->
    <section class="section py-8">
      <div class="container max-w-2xl">

        <!-- Urgency Check -->
        <!-- Urgent Notification - Only shown on Step 1 -->
        <div id="urgent-notification" class="alert alert-warning mb-6">
          <svg class="alert-icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
            <path fill-rule="evenodd"
              d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
              clip-rule="evenodd" />
          </svg>
          <div class="alert-content">
            <p class="alert-title">Is this urgent?</p>
            <p class="text-sm">If you're in immediate danger, please call 911.</p>
          </div>
        </div>

        <!-- Texas Family Help Link Card - Only shown on Step 1 -->
        <a id="family-help-link-card" href="family-help-link.html" class="block mb-8 no-underline group" aria-label="Go to Texas Family Help Link application">
          <div class="card bg-white border-2 border-gray-200 hover:border-primary-300 hover:shadow-xl transition-all duration-300 p-6">
            <div class="flex flex-col gap-4">
              <div>
                <h2 class="text-2xl sm:text-3xl font-bold text-primary-800 mb-2 group-hover:text-primary-600 transition-colors">Texas Family Help Link</h2>
                <p class="text-base sm:text-lg text-gray-700">Connecting children and caregivers in Texas with local legal resources.</p>
              </div>
              <div>
                <div class="inline-flex items-center gap-2 bg-secondary-500 text-primary-900 px-6 py-3 rounded-lg font-semibold group-hover:bg-secondary-400 transition-colors">
                  <span>Go to Online Application</span>
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </a>

<!-- Progress bar removed per design requirements -->

        <!-- Intake Form -->
        <form id="intake-form" data-validate data-multi-step data-form-name="intake" action="/api/intake" method="POST"
          class="card">

          <!-- Step 1: Legal Issue -->
          <div class="form-step" data-step="1">
            <h2 class="text-xl font-bold text-primary-700 mb-4" style="line-height: 1.15;">What type of legal issue do you need help with?</h2>
            <p class="text-gray-600 mb-6">Select the category that best describes your situation.</p>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6">
              <label
                class="card p-4 flex items-center gap-3 cursor-pointer border-2 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                <input type="radio" name="legal_area" value="benefits" class="w-5 h-5 accent-primary-600" required>
                <div>
                  <span class="font-semibold text-primary-800 block">Public Benefits</span>
                  <span class="text-sm text-gray-500">SNAP, Medicaid, Medicare, SSI, SSDI, TANF</span>
                </div>
              </label>

              <label
                class="card p-4 flex items-center gap-3 cursor-pointer border-2 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                <input type="radio" name="legal_area" value="criminal-record" class="w-5 h-5 accent-primary-600">
                <div>
                  <span class="font-semibold text-primary-800 block">Criminal Record Expungement</span>
                  <span class="text-sm text-gray-500">Clear or seal criminal records</span>
                </div>
              </label>

              <label
                class="card p-4 flex items-center gap-3 cursor-pointer border-2 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                <input type="radio" name="legal_area" value="housing" class="w-5 h-5 accent-primary-600">
                <div>
                  <span class="font-semibold text-primary-800 block">Housing & Debt</span>
                  <span class="text-sm text-gray-500">Eviction, debt collection, garnishment, property</span>
                </div>
              </label>

              <label
                class="card p-4 flex items-center gap-3 cursor-pointer border-2 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                <input type="radio" name="legal_area" value="elder-law" class="w-5 h-5 accent-primary-600">
                <div>
                  <span class="font-semibold text-primary-800 block">Elder Law</span>
                  <span class="text-sm text-gray-500">Retirement, estate planning, long-term care</span>
                </div>
              </label>

              <label
                class="card p-4 flex items-center gap-3 cursor-pointer border-2 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                <input type="radio" name="legal_area" value="family" class="w-5 h-5 accent-primary-600">
                <div>
                  <span class="font-semibold text-primary-800 block">Family Law</span>
                  <span class="text-sm text-gray-500">Divorce, guardianship, CPS, custody, support, paternity</span>
                </div>
              </label>

              <label
                class="card p-4 flex items-center gap-3 cursor-pointer border-2 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                <input type="radio" name="legal_area" value="military" class="w-5 h-5 accent-primary-600">
                <div>
                  <span class="font-semibold text-primary-800 block">Military & Benefits</span>
                  <span class="text-sm text-gray-500">VA benefits, discharge upgrades, military law</span>
                </div>
              </label>

              <label
                class="card p-4 flex items-center gap-3 cursor-pointer border-2 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                <input type="radio" name="legal_area" value="violence" class="w-5 h-5 accent-primary-600">
                <div>
                  <span class="font-semibold text-primary-800 block">Violence & Abuse</span>
                  <span class="text-sm text-gray-500">Physical or sexual abuse, stalking, harassment</span>
                </div>
              </label>

              <label
                class="card p-4 flex items-center gap-3 cursor-pointer border-2 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                <input type="radio" name="legal_area" value="other" class="w-5 h-5 accent-primary-600">
                <div>
                  <span class="font-semibold text-primary-800 block">Other</span>
                  <span class="text-sm text-gray-500">Don't see your issue?</span>
                </div>
              </label>
            </div>

            <!-- Age Question (Only for Public Benefits) -->
            <div id="age-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Are you 60 years of age or <span class="whitespace-nowrap">older?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="age_60_or_older" value="yes" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Yes</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="age_60_or_older" value="no" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">No</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Medicare Question (Only for Public Benefits + Age "No") -->
            <div id="medicare-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Do you have health insurance through <span class="whitespace-nowrap">Medicare?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="has_medicare" value="yes" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Yes</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="has_medicare" value="no" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">No</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Medicare Dispute Question (Only for Public Benefits + Age "No" + Medicare "Yes") -->
            <div id="medicare-dispute-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Does your issue involve a dispute involving <span class="whitespace-nowrap">Medicare?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="medicare_dispute" value="yes" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Yes</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="medicare_dispute" value="no" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">No</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Housing Sub-question: Which would you like help with? (Only for Housing & Debt) -->
            <div id="housing-type-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Which would you like help <span class="whitespace-nowrap">with?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="housing_type" value="identity_theft" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Identity Theft</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="housing_type" value="early_termination" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Early termination of a house or apartment lease</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="housing_type" value="other_housing" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Other housing or apartment issue (such as repairs or evictions)</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="housing_type" value="something_else" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Something else</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Housing Sub-question: Lease early termination for sexual assault (Only for early_termination) -->
            <div id="housing-sexual-assault-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Are you interested in ending the lease early for safety reasons following a sexual <span class="whitespace-nowrap">assault?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="housing_sexual_assault" value="yes" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Yes</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="housing_sexual_assault" value="no" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">No</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Family Law Sub-question: Safety concerns (Only for Family Law) -->
            <div id="family-safety-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Are you seeking help with divorce, custody, or a family matter due to safety concerns regarding your spouse or your child's other <span class="whitespace-nowrap">parent?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="family_safety" value="yes" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Yes</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="family_safety" value="no" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">No</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Military & Benefits Sub-question: Veteran or Dependent (Only for Military & Benefits) -->
            <div id="military-veteran-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Are you a veteran, a spouse of a veteran, or a dependent of a <span class="whitespace-nowrap">veteran?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_is_veteran" value="yes" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Yes</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_is_veteran" value="no" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">No</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Military & Benefits Sub-question: Veteran Type (Only for military_is_veteran = yes) -->
            <div id="military-veteran-type-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Which best describes <span class="whitespace-nowrap">you?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_veteran_type" value="veteran" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">I'm a veteran</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_veteran_type" value="spouse" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">I'm the spouse or surviving spouse of a veteran</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_veteran_type" value="dependent_under_18" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm under 18)</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_veteran_type" value="dependent_over_18" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm over 18)</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_veteran_type" value="other" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Other</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Military & Benefits Sub-question: Guardianship (Only for military_veteran_type = dependent_over_18) -->
            <div id="military-guardianship-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Does the veteran have guardianship over yourself (the <span class="whitespace-nowrap">dependent)?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_has_guardianship" value="yes" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Yes</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="military_has_guardianship" value="no" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">No</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <!-- Violence & Abuse Sub-question: Sexual Assault (Only for Violence & Abuse) -->
            <div id="violence-sexual-assault-question" class="mb-6" style="display: none;">
              <fieldset>
                <legend class="text-lg font-semibold text-primary-800 mb-3">Does your issue involve sexual <span class="whitespace-nowrap">assault?<span class="text-red-600">*</span></span></legend>
                <div class="flex flex-col gap-2">
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="violence_sexual_assault" value="yes" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">Yes</span>
                  </label>
                  <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                    <input type="radio" name="violence_sexual_assault" value="no" class="w-5 h-5 accent-primary-600">
                    <span class="font-medium text-primary-800">No</span>
                  </label>
                </div>
              </fieldset>
            </div>

            <div class="flex justify-end">
              <button type="button" class="btn btn-primary" id="step1-continue" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step 2: Public Benefits Contact Info (for Age 60+ = Yes path) -->
          <div class="form-step" data-step="2" id="step-pb-contact" style="display: none;">
            <h2 class="text-xl font-bold text-primary-700 mb-4">Your Contact Information</h2>
            <p class="text-gray-600 mb-6">Please provide your details so we can assist you.</p>

            <div class="form-group">
              <label for="pb_referral_source" class="form-label form-label-required">How did you find out about Texas Legal Aid?</label>
              <select id="pb_referral_source" name="pb_referral_source" class="form-control form-select" required>
                <option value="">Select an option...</option>
                <option value="internet">Internet Search</option>
                <option value="social_media">Social Media</option>
                <option value="friend_family">Friend or Family</option>
                <option value="legal_aid">Another Legal Aid Organization</option>
                <option value="court">Court or Legal System</option>
                <option value="community">Community Organization</option>
                <option value="referred_professional">Referred by an attorney, doctor, counselor, or other professional</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label form-label-required">Your Name</label>
              <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                <div>
                  <input type="text" id="pb_first_name" name="pb_first_name" class="form-control" required
                    autocomplete="given-name" placeholder="First Name">
                  <span class="text-xs text-gray-500">First Name</span>
                </div>
                <div>
                  <input type="text" id="pb_middle_name" name="pb_middle_name" class="form-control"
                    placeholder="Middle">
                  <span class="text-xs text-gray-500">Middle Name (optional)</span>
                </div>
                <div>
                  <input type="text" id="pb_last_name" name="pb_last_name" class="form-control" required
                    autocomplete="family-name" placeholder="Last Name">
                  <span class="text-xs text-gray-500">Last Name</span>
                </div>
                <div>
                  <input type="text" id="pb_suffix" name="pb_suffix" class="form-control"
                    placeholder="Suffix">
                  <span class="text-xs text-gray-500">Suffix (optional)</span>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="pb_email" class="form-label">Email</label>
              <input type="email" id="pb_email" name="pb_email" class="form-control" autocomplete="email"
                placeholder="you@example.com">
            </div>

            <div class="form-group">
              <label for="pb_phone" class="form-label">Phone</label>
              <input type="tel" id="pb_phone" name="pb_phone" class="form-control" autocomplete="tel"
                placeholder="(512) 555-1234">
            </div>

            <div class="form-group">
              <label for="pb_county" class="form-label">County of Residence</label>
              <select id="pb_county" name="pb_county" class="form-control form-select">
                <option value="">Select your county...</option>
                <option value="anderson">Anderson County</option>
                <option value="andrews">Andrews County</option>
                <option value="angelina">Angelina County</option>
                <option value="aransas">Aransas County</option>
                <option value="archer">Archer County</option>
                <option value="armstrong">Armstrong County</option>
                <option value="atascosa">Atascosa County</option>
                <option value="austin">Austin County</option>
                <option value="bailey">Bailey County</option>
                <option value="bandera">Bandera County</option>
                <option value="bastrop">Bastrop County</option>
                <option value="baylor">Baylor County</option>
                <option value="bee">Bee County</option>
                <option value="bell">Bell County</option>
                <option value="bexar">Bexar County</option>
                <option value="blanco">Blanco County</option>
                <option value="borden">Borden County</option>
                <option value="bosque">Bosque County</option>
                <option value="bowie">Bowie County</option>
                <option value="brazoria">Brazoria County</option>
                <option value="brazos">Brazos County</option>
                <option value="brewster">Brewster County</option>
                <option value="briscoe">Briscoe County</option>
                <option value="brooks">Brooks County</option>
                <option value="brown">Brown County</option>
                <option value="burleson">Burleson County</option>
                <option value="burnet">Burnet County</option>
                <option value="caldwell">Caldwell County</option>
                <option value="calhoun">Calhoun County</option>
                <option value="callahan">Callahan County</option>
                <option value="cameron">Cameron County</option>
                <option value="camp">Camp County</option>
                <option value="carson">Carson County</option>
                <option value="cass">Cass County</option>
                <option value="castro">Castro County</option>
                <option value="chambers">Chambers County</option>
                <option value="cherokee">Cherokee County</option>
                <option value="childress">Childress County</option>
                <option value="clay">Clay County</option>
                <option value="cochran">Cochran County</option>
                <option value="coke">Coke County</option>
                <option value="coleman">Coleman County</option>
                <option value="collin">Collin County</option>
                <option value="collingsworth">Collingsworth County</option>
                <option value="colorado">Colorado County</option>
                <option value="comal">Comal County</option>
                <option value="comanche">Comanche County</option>
                <option value="concho">Concho County</option>
                <option value="cooke">Cooke County</option>
                <option value="coryell">Coryell County</option>
                <option value="cottle">Cottle County</option>
                <option value="crane">Crane County</option>
                <option value="crockett">Crockett County</option>
                <option value="crosby">Crosby County</option>
                <option value="culberson">Culberson County</option>
                <option value="dallam">Dallam County</option>
                <option value="dallas">Dallas County</option>
                <option value="dawson">Dawson County</option>
                <option value="deaf-smith">Deaf Smith County</option>
                <option value="delta">Delta County</option>
                <option value="denton">Denton County</option>
                <option value="dewitt">DeWitt County</option>
                <option value="dickens">Dickens County</option>
                <option value="dimmit">Dimmit County</option>
                <option value="donley">Donley County</option>
                <option value="duval">Duval County</option>
                <option value="eastland">Eastland County</option>
                <option value="ector">Ector County</option>
                <option value="edwards">Edwards County</option>
                <option value="el-paso">El Paso County</option>
                <option value="ellis">Ellis County</option>
                <option value="erath">Erath County</option>
                <option value="falls">Falls County</option>
                <option value="fannin">Fannin County</option>
                <option value="fayette">Fayette County</option>
                <option value="fisher">Fisher County</option>
                <option value="floyd">Floyd County</option>
                <option value="foard">Foard County</option>
                <option value="fort-bend">Fort Bend County</option>
                <option value="franklin">Franklin County</option>
                <option value="freestone">Freestone County</option>
                <option value="frio">Frio County</option>
                <option value="gaines">Gaines County</option>
                <option value="galveston">Galveston County</option>
                <option value="garza">Garza County</option>
                <option value="gillespie">Gillespie County</option>
                <option value="glasscock">Glasscock County</option>
                <option value="goliad">Goliad County</option>
                <option value="gonzales">Gonzales County</option>
                <option value="gray">Gray County</option>
                <option value="grayson">Grayson County</option>
                <option value="gregg">Gregg County</option>
                <option value="grimes">Grimes County</option>
                <option value="guadalupe">Guadalupe County</option>
                <option value="hale">Hale County</option>
                <option value="hall">Hall County</option>
                <option value="hamilton">Hamilton County</option>
                <option value="hansford">Hansford County</option>
                <option value="hardeman">Hardeman County</option>
                <option value="hardin">Hardin County</option>
                <option value="harris">Harris County</option>
                <option value="harrison">Harrison County</option>
                <option value="hartley">Hartley County</option>
                <option value="haskell">Haskell County</option>
                <option value="hays">Hays County</option>
                <option value="hemphill">Hemphill County</option>
                <option value="henderson">Henderson County</option>
                <option value="hidalgo">Hidalgo County</option>
                <option value="hill">Hill County</option>
                <option value="hockley">Hockley County</option>
                <option value="hood">Hood County</option>
                <option value="hopkins">Hopkins County</option>
                <option value="houston">Houston County</option>
                <option value="howard">Howard County</option>
                <option value="hudspeth">Hudspeth County</option>
                <option value="hunt">Hunt County</option>
                <option value="hutchinson">Hutchinson County</option>
                <option value="irion">Irion County</option>
                <option value="jack">Jack County</option>
                <option value="jackson">Jackson County</option>
                <option value="jasper">Jasper County</option>
                <option value="jeff-davis">Jeff Davis County</option>
                <option value="jefferson">Jefferson County</option>
                <option value="jim-hogg">Jim Hogg County</option>
                <option value="jim-wells">Jim Wells County</option>
                <option value="johnson">Johnson County</option>
                <option value="jones">Jones County</option>
                <option value="karnes">Karnes County</option>
                <option value="kaufman">Kaufman County</option>
                <option value="kendall">Kendall County</option>
                <option value="kenedy">Kenedy County</option>
                <option value="kent">Kent County</option>
                <option value="kerr">Kerr County</option>
                <option value="kimble">Kimble County</option>
                <option value="king">King County</option>
                <option value="kinney">Kinney County</option>
                <option value="kleberg">Kleberg County</option>
                <option value="knox">Knox County</option>
                <option value="lamar">Lamar County</option>
                <option value="lamb">Lamb County</option>
                <option value="lampasas">Lampasas County</option>
                <option value="la-salle">La Salle County</option>
                <option value="lavaca">Lavaca County</option>
                <option value="lee">Lee County</option>
                <option value="leon">Leon County</option>
                <option value="liberty">Liberty County</option>
                <option value="limestone">Limestone County</option>
                <option value="lipscomb">Lipscomb County</option>
                <option value="live-oak">Live Oak County</option>
                <option value="llano">Llano County</option>
                <option value="loving">Loving County</option>
                <option value="lubbock">Lubbock County</option>
                <option value="lynn">Lynn County</option>
                <option value="madison">Madison County</option>
                <option value="marion">Marion County</option>
                <option value="martin">Martin County</option>
                <option value="mason">Mason County</option>
                <option value="matagorda">Matagorda County</option>
                <option value="maverick">Maverick County</option>
                <option value="mcculloch">McCulloch County</option>
                <option value="mclennan">McLennan County</option>
                <option value="mcmullen">McMullen County</option>
                <option value="medina">Medina County</option>
                <option value="menard">Menard County</option>
                <option value="midland">Midland County</option>
                <option value="milam">Milam County</option>
                <option value="mills">Mills County</option>
                <option value="mitchell">Mitchell County</option>
                <option value="montague">Montague County</option>
                <option value="montgomery">Montgomery County</option>
                <option value="moore">Moore County</option>
                <option value="morris">Morris County</option>
                <option value="motley">Motley County</option>
                <option value="nacogdoches">Nacogdoches County</option>
                <option value="navarro">Navarro County</option>
                <option value="newton">Newton County</option>
                <option value="nolan">Nolan County</option>
                <option value="nueces">Nueces County</option>
                <option value="ochiltree">Ochiltree County</option>
                <option value="oldham">Oldham County</option>
                <option value="orange">Orange County</option>
                <option value="palo-pinto">Palo Pinto County</option>
                <option value="panola">Panola County</option>
                <option value="parker">Parker County</option>
                <option value="parmer">Parmer County</option>
                <option value="pecos">Pecos County</option>
                <option value="polk">Polk County</option>
                <option value="potter">Potter County</option>
                <option value="presidio">Presidio County</option>
                <option value="rains">Rains County</option>
                <option value="randall">Randall County</option>
                <option value="reagan">Reagan County</option>
                <option value="real">Real County</option>
                <option value="red-river">Red River County</option>
                <option value="reeves">Reeves County</option>
                <option value="refugio">Refugio County</option>
                <option value="roberts">Roberts County</option>
                <option value="robertson">Robertson County</option>
                <option value="rockwall">Rockwall County</option>
                <option value="runnels">Runnels County</option>
                <option value="rusk">Rusk County</option>
                <option value="sabine">Sabine County</option>
                <option value="san-augustine">San Augustine County</option>
                <option value="san-jacinto">San Jacinto County</option>
                <option value="san-patricio">San Patricio County</option>
                <option value="san-saba">San Saba County</option>
                <option value="schleicher">Schleicher County</option>
                <option value="scurry">Scurry County</option>
                <option value="shackelford">Shackelford County</option>
                <option value="shelby">Shelby County</option>
                <option value="sherman">Sherman County</option>
                <option value="smith">Smith County</option>
                <option value="somervell">Somervell County</option>
                <option value="starr">Starr County</option>
                <option value="stephens">Stephens County</option>
                <option value="sterling">Sterling County</option>
                <option value="stonewall">Stonewall County</option>
                <option value="sutton">Sutton County</option>
                <option value="swisher">Swisher County</option>
                <option value="tarrant">Tarrant County</option>
                <option value="taylor">Taylor County</option>
                <option value="terrell">Terrell County</option>
                <option value="terry">Terry County</option>
                <option value="throckmorton">Throckmorton County</option>
                <option value="titus">Titus County</option>
                <option value="tom-green">Tom Green County</option>
                <option value="travis">Travis County</option>
                <option value="trinity">Trinity County</option>
                <option value="tyler">Tyler County</option>
                <option value="upshur">Upshur County</option>
                <option value="upton">Upton County</option>
                <option value="uvalde">Uvalde County</option>
                <option value="val-verde">Val Verde County</option>
                <option value="van-zandt">Van Zandt County</option>
                <option value="victoria">Victoria County</option>
                <option value="walker">Walker County</option>
                <option value="waller">Waller County</option>
                <option value="ward">Ward County</option>
                <option value="washington">Washington County</option>
                <option value="webb">Webb County</option>
                <option value="wharton">Wharton County</option>
                <option value="wheeler">Wheeler County</option>
                <option value="wichita">Wichita County</option>
                <option value="wilbarger">Wilbarger County</option>
                <option value="willacy">Willacy County</option>
                <option value="williamson">Williamson County</option>
                <option value="wilson">Wilson County</option>
                <option value="winkler">Winkler County</option>
                <option value="wise">Wise County</option>
                <option value="wood">Wood County</option>
                <option value="yoakum">Yoakum County</option>
                <option value="young">Young County</option>
                <option value="zapata">Zapata County</option>
                <option value="zavala">Zavala County</option>
              </select>
              <p class="form-text text-xs text-gray-500 mt-1 uppercase">Optional â€” If we can't help with your particular type of case, we can look for another free program that can help you based on your county of residence.</p>
            </div>

            <div class="form-group">
              <label for="pb_legal_problem" class="form-label">Tell us a little about your legal problem.</label>
              <textarea id="pb_legal_problem" name="pb_legal_problem" class="form-control" rows="5"
                placeholder="Please describe your situation..."></textarea>
            </div>

            <div class="flex justify-between">
              <button type="button" class="btn btn-outline" data-step-prev>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="pb-submit-btn">
                Submit Application
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Thank You Confirmation -->
          <div class="form-step" data-step="thank-you" id="step-thank-you" style="display: none;">
            <div class="text-center py-8">
              <div class="inline-flex items-center justify-center w-16 h-16 bg-gray-800 rounded-full mb-6">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-primary-800 mb-4">Thank You</h2>
              <p class="text-gray-600 text-lg">Your application was submitted successfully.</p>
            </div>
          </div>

          <!-- Step: Household Info (for Public Benefits + Age No + Medicare No path) -->
          <div class="form-step" data-step="household" id="step-household-info" style="display: none;">
            <h2 class="text-xl font-bold text-primary-700 mb-4">Household Information</h2>
            <p class="text-gray-600 mb-6">Please provide information about your household.</p>

            <div class="form-group">
              <label for="household_size" class="form-label form-label-required">
                How many persons are in your household?
                <span class="help-icon" aria-label="Help">?<span class="tooltip">This is the total number of people, adults and children, who live in your household. If one of the people who live in the household pays child support for any child/ren that do not live in the household, also include that child/ren.</span></span>
              </label>
              <select id="household_size" name="household_size" class="form-control form-select" required>
                <option value="">Select household size...</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
              </select>
            </div>

            <div class="form-group">
              <label for="household_income" class="form-label form-label-required">
                What is your household income?
                <span class="help-icon" aria-label="Help">?<span class="tooltip">This is the total income of all people who live in your household. This is gross income, before deducting taxes, withholdings, etc. You may specify the amount as a weekly, monthly or yearly amount.</span></span>
              </label>
              <div class="flex gap-3">
                <div class="relative flex-1">
                  <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">$</span>
                  <input type="number" id="household_income" name="household_income" class="form-control pl-7"
                    min="0" max="400000" step="1" required placeholder="0">
                </div>
                <select id="income_frequency" name="income_frequency" class="form-control form-select w-auto" required>
                  <option value="weekly">Weekly</option>
                  <option value="monthly" selected>Monthly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="income_year" class="form-label form-label-required">
                What year is this information for?
                <span class="help-icon" aria-label="Help">?<span class="tooltip">Select the year for which the information you provided above (size and income) is for, which should be the latest year of information that is available to you.</span></span>
              </label>
              <select id="income_year" name="income_year" class="form-control form-select" required>
                <!-- Options populated dynamically via JavaScript -->
              </select>
            </div>

            <div class="form-group">
              <div class="p-4 bg-primary-50 rounded-lg border border-primary-200">
                <p class="text-base text-primary-800 mb-1">
                  Household size: <span id="household-size-display" class="font-semibold">--</span>
                </p>
                <p class="text-base text-primary-800 mb-1">
                  Annual household income: <span id="annual-income-display" class="font-semibold">--</span>
                </p>
                <p class="text-base text-primary-800 mb-1">
                  Year: <span id="income-year-display" class="font-semibold">--</span>
                </p>
                <p class="text-lg text-primary-800 mb-2">
                  Poverty percent: <span id="poverty-percent-display" class="font-semibold">--</span>
                </p>
                <a href="https://aspe.hhs.gov/topics/poverty-economic-mobility/poverty-guidelines"
                   target="_blank"
                   rel="noopener noreferrer"
                   class="text-sm text-primary-600 hover:text-primary-800 underline block">
                  HHS Poverty Guidelines
                </a>
                <a href="https://teajf.org/grants/docs/2024/2025%20TAJF%20REV%20Income%20Guideline%20chart%202025.pdf"
                   target="_blank"
                   rel="noopener noreferrer"
                   class="text-sm text-primary-600 hover:text-primary-800 underline block">
                  TAJF 2025 Financial Income Guidelines
                </a>
              </div>
            </div>

            <div class="flex justify-between">
              <button type="button" class="btn btn-outline" id="household-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="household-continue-btn">
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Crime Victim Question (for poverty <= 200%) -->
          <div class="form-step" data-step="crime-victim" id="step-crime-victim" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Were you a victim of a violent crime and need assistance applying for crime victims' <span class="whitespace-nowrap">compensation?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="crime_victim" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="crime_victim" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="crime-victim-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="crime-victim-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Veterans Question (for crime_victim = no) -->
          <div class="form-step" data-step="veterans" id="step-veterans" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Are you a veteran, a spouse of a veteran, or a dependent of a <span class="whitespace-nowrap">veteran?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="is_veteran" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="is_veteran" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Which best describes you? (shown when is_veteran = yes) -->
            <fieldset id="veteran-type-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Which best describes <span class="whitespace-nowrap">you?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="veteran_type" value="veteran" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm a veteran</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="veteran_type" value="spouse" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the spouse or surviving spouse of a veteran</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="veteran_type" value="dependent_under_18" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm under 18)</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="veteran_type" value="dependent_over_18" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm over 18)</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="veteran_type" value="other" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Other</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Guardianship question (shown when veteran_type = dependent_over_18) -->
            <fieldset id="guardianship-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Does the veteran have guardianship over yourself (the <span class="whitespace-nowrap">dependent)?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="has_guardianship" value="yes" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="has_guardianship" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="veterans-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="veterans-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Child Care Question (for is_veteran = no) -->
          <div class="form-step" data-step="child-care" id="step-child-care" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Are you taking care of a child who is not your own, like a grandchild, niece, or nephew, and having trouble getting or keeping benefits for you or the <span class="whitespace-nowrap">child?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="child_care" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="child_care" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="child-care-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="child-care-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Defense Attorney Question (for Criminal Record Expungement) -->
          <div class="form-step" data-step="defense-attorney" id="step-defense-attorney" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Are you looking for a defense attorney â€” someone to represent you in a criminal case that may lead to fines or <span class="whitespace-nowrap">incarceration?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="defense_attorney" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="defense_attorney" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Did the alleged crime occur in Texas? (shown when defense_attorney = no) -->
            <fieldset id="texas-crime-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Did the alleged crime occur in <span class="whitespace-nowrap">Texas?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="texas_crime" value="yes" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="texas_crime" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="defense-attorney-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="defense-attorney-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Criminal Record Veterans Question (for texas_crime = yes) -->
          <div class="form-step" data-step="cr-veterans" id="step-cr-veterans" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Are you a veteran, spouse, or dependent of a <span class="whitespace-nowrap">veteran?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_is_veteran" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_is_veteran" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Which best describes you? (shown when cr_is_veteran = yes) -->
            <fieldset id="cr-veteran-type-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Which best describes <span class="whitespace-nowrap">you?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_veteran_type" value="veteran" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm a veteran</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_veteran_type" value="spouse" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the spouse or surviving spouse of a veteran</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_veteran_type" value="dependent_under_18" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm under 18)</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_veteran_type" value="dependent_over_18" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm over 18)</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_veteran_type" value="other" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Other</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Guardianship question (shown when cr_veteran_type = dependent_over_18) -->
            <fieldset id="cr-guardianship-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Does the veteran have guardianship over yourself (the <span class="whitespace-nowrap">dependent)?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_has_guardianship" value="yes" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="cr_has_guardianship" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="cr-veterans-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="cr-veterans-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Housing Veterans Question (for Housing & Debt path) -->
          <div class="form-step" data-step="housing-veterans" id="step-housing-veterans" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Are you a veteran, a spouse of a veteran, or a dependent of a <span class="whitespace-nowrap">veteran?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_is_veteran" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_is_veteran" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Which best describes you? (shown when housing_is_veteran = yes) -->
            <fieldset id="housing-veteran-type-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Which best describes <span class="whitespace-nowrap">you?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_veteran_type" value="veteran" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm a veteran</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_veteran_type" value="spouse" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the spouse or surviving spouse of a veteran</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_veteran_type" value="dependent_under_18" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm under 18)</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_veteran_type" value="dependent_over_18" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm over 18)</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_veteran_type" value="other" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Other</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Guardianship question (shown when housing_veteran_type = dependent_over_18) -->
            <fieldset id="housing-guardianship-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Does the veteran have guardianship over yourself (the <span class="whitespace-nowrap">dependent)?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_has_guardianship" value="yes" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_has_guardianship" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="housing-veterans-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="housing-veterans-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Housing Age 60+ Question (for Housing & Debt + Something else + is_veteran = no) -->
          <div class="form-step" data-step="housing-age-60" id="step-housing-age-60" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Are you 60 years of age or <span class="whitespace-nowrap">older?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_age_60" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="housing_age_60" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="housing-age-60-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="housing-age-60-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Elder Law Deceased Retirement Funds Question -->
          <div class="form-step" data-step="elder-deceased" id="step-elder-deceased" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Does your issue involve accessing the retirement or other funds and property of a person who is now <span class="whitespace-nowrap">deceased?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_deceased" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_deceased" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="elder-deceased-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="elder-deceased-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Elder Law Veterans Question (for deceased = yes) -->
          <div class="form-step" data-step="elder-veterans" id="step-elder-veterans" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Are you a veteran, a spouse of a veteran, or a dependent of a <span class="whitespace-nowrap">veteran?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_is_veteran" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_is_veteran" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Which best describes you? (shown when elder_is_veteran = yes) -->
            <fieldset id="elder-veteran-type-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Which best describes <span class="whitespace-nowrap">you?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_veteran_type" value="veteran" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm a veteran</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_veteran_type" value="spouse" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the spouse or surviving spouse of a veteran</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_veteran_type" value="dependent_under_18" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm under 18)</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_veteran_type" value="dependent_over_18" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm the dependant of a veteran (and I'm over 18)</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_veteran_type" value="other" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Other</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Guardianship question (shown when elder_veteran_type = dependent_over_18) -->
            <fieldset id="elder-guardianship-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Does the veteran have guardianship over yourself (the <span class="whitespace-nowrap">dependent)?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_has_guardianship" value="yes" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_has_guardianship" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="elder-veterans-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="elder-veterans-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Elder Law Pension/401(k) Question (for deceased = no) -->
          <div class="form-step" data-step="elder-pension" id="step-elder-pension" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Does your issue involve a retirement plan â€” like a pension or a <span class="whitespace-nowrap">401(k)?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_pension" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_pension" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <!-- Conditional: Physical violence question (shown when elder_pension = no) -->
            <fieldset id="elder-violence-question" class="mt-6" style="display: none;">
              <legend class="text-lg font-semibold text-primary-800 mb-3">Does your issue involve physical violence against an elderly <span class="whitespace-nowrap">person?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_violence" value="yes" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_violence" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="elder-pension-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="elder-pension-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Elder Law Age 60+ Question (for pension = no + violence = no) -->
          <div class="form-step" data-step="elder-age-60" id="step-elder-age-60" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Are you 60 years of age or <span class="whitespace-nowrap">older?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_age_60" value="yes" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">Yes</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="elder_age_60" value="no" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">No</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="elder-age-60-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="elder-age-60-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Family Law Best Fit Question (for family_safety = no) -->
          <div class="form-step" data-step="family-best-fit" id="step-family-best-fit" style="display: none;">
            <fieldset>
              <legend class="text-lg font-semibold text-primary-800 mb-3">Which of the following best fits your <span class="whitespace-nowrap">situation?<span class="text-red-600">*</span></span></legend>
              <div class="flex flex-col gap-2">
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="family_best_fit" value="raising_child" class="w-5 h-5 accent-primary-600" required>
                  <span class="font-medium text-primary-800">I'm raising a child who is not my biological or adopted child and want to establish a legal relationship</span>
                </label>
                <label class="flex items-center gap-3 p-3 rounded-lg border-2 border-gray-200 hover:border-primary-300 has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50 cursor-pointer">
                  <input type="radio" name="family_best_fit" value="other_family" class="w-5 h-5 accent-primary-600">
                  <span class="font-medium text-primary-800">I'm seeking help with divorce, custody, child support, or other family matter</span>
                </label>
              </div>
            </fieldset>

            <div class="flex justify-between mt-8">
              <button type="button" class="btn btn-outline" id="family-best-fit-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="family-best-fit-continue-btn" disabled>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step: Contact Info (for Public Benefits + Age No + Medicare No path - after Household Info) -->
          <div class="form-step" data-step="pb-contact-no-medicare" id="step-pb-contact-no-medicare" style="display: none;">
            <h2 class="text-xl font-bold text-primary-700 mb-4">Your Contact Information</h2>
            <p class="text-gray-600 mb-6">Please provide your details so we can assist you.</p>

            <div class="form-group">
              <label for="pb_nm_referral_source" class="form-label form-label-required">How did you find out about Texas Legal Aid?</label>
              <select id="pb_nm_referral_source" name="pb_nm_referral_source" class="form-control form-select" required>
                <option value="">Select an option...</option>
                <option value="internet">Internet Search</option>
                <option value="social_media">Social Media</option>
                <option value="friend_family">Friend or Family</option>
                <option value="legal_aid">Another Legal Aid Organization</option>
                <option value="court">Court or Legal System</option>
                <option value="community">Community Organization</option>
                <option value="referred_professional">Referred by an attorney, doctor, counselor, or other professional</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label form-label-required">Your Name</label>
              <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                <div>
                  <input type="text" id="pb_nm_first_name" name="pb_nm_first_name" class="form-control" required
                    autocomplete="given-name" placeholder="First Name">
                  <span class="text-xs text-gray-500">First Name</span>
                </div>
                <div>
                  <input type="text" id="pb_nm_middle_name" name="pb_nm_middle_name" class="form-control"
                    placeholder="Middle">
                  <span class="text-xs text-gray-500">Middle Name (optional)</span>
                </div>
                <div>
                  <input type="text" id="pb_nm_last_name" name="pb_nm_last_name" class="form-control" required
                    autocomplete="family-name" placeholder="Last Name">
                  <span class="text-xs text-gray-500">Last Name</span>
                </div>
                <div>
                  <input type="text" id="pb_nm_suffix" name="pb_nm_suffix" class="form-control"
                    placeholder="Suffix">
                  <span class="text-xs text-gray-500">Suffix (optional)</span>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="pb_nm_email" class="form-label">Email</label>
              <input type="email" id="pb_nm_email" name="pb_nm_email" class="form-control" autocomplete="email"
                placeholder="you@example.com">
            </div>

            <div class="form-group">
              <label for="pb_nm_phone" class="form-label">Phone</label>
              <input type="tel" id="pb_nm_phone" name="pb_nm_phone" class="form-control" autocomplete="tel"
                placeholder="(512) 555-1234">
            </div>

            <div class="form-group">
              <label for="pb_nm_county" class="form-label">County of Residence</label>
              <select id="pb_nm_county" name="pb_nm_county" class="form-control form-select">
                <option value="">Select your county...</option>
                <option value="anderson">Anderson County</option>
                <option value="andrews">Andrews County</option>
                <option value="angelina">Angelina County</option>
                <option value="aransas">Aransas County</option>
                <option value="archer">Archer County</option>
                <option value="armstrong">Armstrong County</option>
                <option value="atascosa">Atascosa County</option>
                <option value="austin">Austin County</option>
                <option value="bailey">Bailey County</option>
                <option value="bandera">Bandera County</option>
                <option value="bastrop">Bastrop County</option>
                <option value="baylor">Baylor County</option>
                <option value="bee">Bee County</option>
                <option value="bell">Bell County</option>
                <option value="bexar">Bexar County</option>
                <option value="blanco">Blanco County</option>
                <option value="borden">Borden County</option>
                <option value="bosque">Bosque County</option>
                <option value="bowie">Bowie County</option>
                <option value="brazoria">Brazoria County</option>
                <option value="brazos">Brazos County</option>
                <option value="brewster">Brewster County</option>
                <option value="briscoe">Briscoe County</option>
                <option value="brooks">Brooks County</option>
                <option value="brown">Brown County</option>
                <option value="burleson">Burleson County</option>
                <option value="burnet">Burnet County</option>
                <option value="caldwell">Caldwell County</option>
                <option value="calhoun">Calhoun County</option>
                <option value="callahan">Callahan County</option>
                <option value="cameron">Cameron County</option>
                <option value="camp">Camp County</option>
                <option value="carson">Carson County</option>
                <option value="cass">Cass County</option>
                <option value="castro">Castro County</option>
                <option value="chambers">Chambers County</option>
                <option value="cherokee">Cherokee County</option>
                <option value="childress">Childress County</option>
                <option value="clay">Clay County</option>
                <option value="cochran">Cochran County</option>
                <option value="coke">Coke County</option>
                <option value="coleman">Coleman County</option>
                <option value="collin">Collin County</option>
                <option value="collingsworth">Collingsworth County</option>
                <option value="colorado">Colorado County</option>
                <option value="comal">Comal County</option>
                <option value="comanche">Comanche County</option>
                <option value="concho">Concho County</option>
                <option value="cooke">Cooke County</option>
                <option value="coryell">Coryell County</option>
                <option value="cottle">Cottle County</option>
                <option value="crane">Crane County</option>
                <option value="crockett">Crockett County</option>
                <option value="crosby">Crosby County</option>
                <option value="culberson">Culberson County</option>
                <option value="dallam">Dallam County</option>
                <option value="dallas">Dallas County</option>
                <option value="dawson">Dawson County</option>
                <option value="deaf-smith">Deaf Smith County</option>
                <option value="delta">Delta County</option>
                <option value="denton">Denton County</option>
                <option value="dewitt">DeWitt County</option>
                <option value="dickens">Dickens County</option>
                <option value="dimmit">Dimmit County</option>
                <option value="donley">Donley County</option>
                <option value="duval">Duval County</option>
                <option value="eastland">Eastland County</option>
                <option value="ector">Ector County</option>
                <option value="edwards">Edwards County</option>
                <option value="el-paso">El Paso County</option>
                <option value="ellis">Ellis County</option>
                <option value="erath">Erath County</option>
                <option value="falls">Falls County</option>
                <option value="fannin">Fannin County</option>
                <option value="fayette">Fayette County</option>
                <option value="fisher">Fisher County</option>
                <option value="floyd">Floyd County</option>
                <option value="foard">Foard County</option>
                <option value="fort-bend">Fort Bend County</option>
                <option value="franklin">Franklin County</option>
                <option value="freestone">Freestone County</option>
                <option value="frio">Frio County</option>
                <option value="gaines">Gaines County</option>
                <option value="galveston">Galveston County</option>
                <option value="garza">Garza County</option>
                <option value="gillespie">Gillespie County</option>
                <option value="glasscock">Glasscock County</option>
                <option value="goliad">Goliad County</option>
                <option value="gonzales">Gonzales County</option>
                <option value="gray">Gray County</option>
                <option value="grayson">Grayson County</option>
                <option value="gregg">Gregg County</option>
                <option value="grimes">Grimes County</option>
                <option value="guadalupe">Guadalupe County</option>
                <option value="hale">Hale County</option>
                <option value="hall">Hall County</option>
                <option value="hamilton">Hamilton County</option>
                <option value="hansford">Hansford County</option>
                <option value="hardeman">Hardeman County</option>
                <option value="hardin">Hardin County</option>
                <option value="harris">Harris County</option>
                <option value="harrison">Harrison County</option>
                <option value="hartley">Hartley County</option>
                <option value="haskell">Haskell County</option>
                <option value="hays">Hays County</option>
                <option value="hemphill">Hemphill County</option>
                <option value="henderson">Henderson County</option>
                <option value="hidalgo">Hidalgo County</option>
                <option value="hill">Hill County</option>
                <option value="hockley">Hockley County</option>
                <option value="hood">Hood County</option>
                <option value="hopkins">Hopkins County</option>
                <option value="houston">Houston County</option>
                <option value="howard">Howard County</option>
                <option value="hudspeth">Hudspeth County</option>
                <option value="hunt">Hunt County</option>
                <option value="hutchinson">Hutchinson County</option>
                <option value="irion">Irion County</option>
                <option value="jack">Jack County</option>
                <option value="jackson">Jackson County</option>
                <option value="jasper">Jasper County</option>
                <option value="jeff-davis">Jeff Davis County</option>
                <option value="jefferson">Jefferson County</option>
                <option value="jim-hogg">Jim Hogg County</option>
                <option value="jim-wells">Jim Wells County</option>
                <option value="johnson">Johnson County</option>
                <option value="jones">Jones County</option>
                <option value="karnes">Karnes County</option>
                <option value="kaufman">Kaufman County</option>
                <option value="kendall">Kendall County</option>
                <option value="kenedy">Kenedy County</option>
                <option value="kent">Kent County</option>
                <option value="kerr">Kerr County</option>
                <option value="kimble">Kimble County</option>
                <option value="king">King County</option>
                <option value="kinney">Kinney County</option>
                <option value="kleberg">Kleberg County</option>
                <option value="knox">Knox County</option>
                <option value="lamar">Lamar County</option>
                <option value="lamb">Lamb County</option>
                <option value="lampasas">Lampasas County</option>
                <option value="la-salle">La Salle County</option>
                <option value="lavaca">Lavaca County</option>
                <option value="lee">Lee County</option>
                <option value="leon">Leon County</option>
                <option value="liberty">Liberty County</option>
                <option value="limestone">Limestone County</option>
                <option value="lipscomb">Lipscomb County</option>
                <option value="live-oak">Live Oak County</option>
                <option value="llano">Llano County</option>
                <option value="loving">Loving County</option>
                <option value="lubbock">Lubbock County</option>
                <option value="lynn">Lynn County</option>
                <option value="madison">Madison County</option>
                <option value="marion">Marion County</option>
                <option value="martin">Martin County</option>
                <option value="mason">Mason County</option>
                <option value="matagorda">Matagorda County</option>
                <option value="maverick">Maverick County</option>
                <option value="mcculloch">McCulloch County</option>
                <option value="mclennan">McLennan County</option>
                <option value="mcmullen">McMullen County</option>
                <option value="medina">Medina County</option>
                <option value="menard">Menard County</option>
                <option value="midland">Midland County</option>
                <option value="milam">Milam County</option>
                <option value="mills">Mills County</option>
                <option value="mitchell">Mitchell County</option>
                <option value="montague">Montague County</option>
                <option value="montgomery">Montgomery County</option>
                <option value="moore">Moore County</option>
                <option value="morris">Morris County</option>
                <option value="motley">Motley County</option>
                <option value="nacogdoches">Nacogdoches County</option>
                <option value="navarro">Navarro County</option>
                <option value="newton">Newton County</option>
                <option value="nolan">Nolan County</option>
                <option value="nueces">Nueces County</option>
                <option value="ochiltree">Ochiltree County</option>
                <option value="oldham">Oldham County</option>
                <option value="orange">Orange County</option>
                <option value="palo-pinto">Palo Pinto County</option>
                <option value="panola">Panola County</option>
                <option value="parker">Parker County</option>
                <option value="parmer">Parmer County</option>
                <option value="pecos">Pecos County</option>
                <option value="polk">Polk County</option>
                <option value="potter">Potter County</option>
                <option value="presidio">Presidio County</option>
                <option value="rains">Rains County</option>
                <option value="randall">Randall County</option>
                <option value="reagan">Reagan County</option>
                <option value="real">Real County</option>
                <option value="red-river">Red River County</option>
                <option value="reeves">Reeves County</option>
                <option value="refugio">Refugio County</option>
                <option value="roberts">Roberts County</option>
                <option value="robertson">Robertson County</option>
                <option value="rockwall">Rockwall County</option>
                <option value="runnels">Runnels County</option>
                <option value="rusk">Rusk County</option>
                <option value="sabine">Sabine County</option>
                <option value="san-augustine">San Augustine County</option>
                <option value="san-jacinto">San Jacinto County</option>
                <option value="san-patricio">San Patricio County</option>
                <option value="san-saba">San Saba County</option>
                <option value="schleicher">Schleicher County</option>
                <option value="scurry">Scurry County</option>
                <option value="shackelford">Shackelford County</option>
                <option value="shelby">Shelby County</option>
                <option value="sherman">Sherman County</option>
                <option value="smith">Smith County</option>
                <option value="somervell">Somervell County</option>
                <option value="starr">Starr County</option>
                <option value="stephens">Stephens County</option>
                <option value="sterling">Sterling County</option>
                <option value="stonewall">Stonewall County</option>
                <option value="sutton">Sutton County</option>
                <option value="swisher">Swisher County</option>
                <option value="tarrant">Tarrant County</option>
                <option value="taylor">Taylor County</option>
                <option value="terrell">Terrell County</option>
                <option value="terry">Terry County</option>
                <option value="throckmorton">Throckmorton County</option>
                <option value="titus">Titus County</option>
                <option value="tom-green">Tom Green County</option>
                <option value="travis">Travis County</option>
                <option value="trinity">Trinity County</option>
                <option value="tyler">Tyler County</option>
                <option value="upshur">Upshur County</option>
                <option value="upton">Upton County</option>
                <option value="uvalde">Uvalde County</option>
                <option value="val-verde">Val Verde County</option>
                <option value="van-zandt">Van Zandt County</option>
                <option value="victoria">Victoria County</option>
                <option value="walker">Walker County</option>
                <option value="waller">Waller County</option>
                <option value="ward">Ward County</option>
                <option value="washington">Washington County</option>
                <option value="webb">Webb County</option>
                <option value="wharton">Wharton County</option>
                <option value="wheeler">Wheeler County</option>
                <option value="wichita">Wichita County</option>
                <option value="wilbarger">Wilbarger County</option>
                <option value="willacy">Willacy County</option>
                <option value="williamson">Williamson County</option>
                <option value="wilson">Wilson County</option>
                <option value="winkler">Winkler County</option>
                <option value="wise">Wise County</option>
                <option value="wood">Wood County</option>
                <option value="yoakum">Yoakum County</option>
                <option value="young">Young County</option>
                <option value="zapata">Zapata County</option>
                <option value="zavala">Zavala County</option>
              </select>
              <p class="form-text text-xs text-gray-500 mt-1 uppercase">Optional â€” If we can't help with your particular type of case, we can look for another free program that can help you based on your county of residence.</p>
            </div>

            <div class="form-group">
              <label for="pb_nm_legal_problem" class="form-label">Tell us a little about your legal problem.</label>
              <textarea id="pb_nm_legal_problem" name="pb_nm_legal_problem" class="form-control" rows="5"
                placeholder="Please describe your situation..."></textarea>
            </div>

            <div class="form-group">
              <div class="p-4 bg-primary-50 rounded-lg border border-primary-200">
                <p class="text-base text-primary-800 mb-1">
                  Household size: <span id="contact-household-size-display" class="font-semibold">--</span>
                </p>
                <p class="text-base text-primary-800 mb-1">
                  Annual household income: <span id="contact-annual-income-display" class="font-semibold">--</span>
                </p>
                <p class="text-base text-primary-800 mb-1">
                  Year: <span id="contact-income-year-display" class="font-semibold">--</span>
                </p>
                <p class="text-lg text-primary-800 mb-2">
                  Poverty percent: <span id="contact-poverty-percent-display" class="font-semibold">--</span>
                </p>
                <a href="https://aspe.hhs.gov/topics/poverty-economic-mobility/poverty-guidelines"
                   target="_blank"
                   rel="noopener noreferrer"
                   class="text-sm text-primary-600 hover:text-primary-800 underline block">
                  HHS Poverty Guidelines
                </a>
                <a href="https://teajf.org/grants/docs/2024/2025%20TAJF%20REV%20Income%20Guideline%20chart%202025.pdf"
                   target="_blank"
                   rel="noopener noreferrer"
                   class="text-sm text-primary-600 hover:text-primary-800 underline block">
                  TAJF 2025 Financial Income Guidelines
                </a>
              </div>
            </div>

            <div class="flex justify-between">
              <button type="button" class="btn btn-outline" id="pb-nm-contact-back-btn">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" id="pb-nm-submit-btn">
                Submit Application
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step 3: Details (for other paths) -->
          <div class="form-step" data-step="3" style="display: none;">
            <h2 class="text-xl font-bold text-primary-700 mb-4">Tell us more about your situation</h2>
            <p class="text-gray-600 mb-6">This information helps us match you with the right legal aid provider.</p>

            <div class="form-group">
              <label for="issue_description" class="form-label form-label-required">Describe your legal issue</label>
              <textarea id="issue_description" name="issue_description" class="form-control" rows="4"
                placeholder="Please describe your situation in a few sentences. Include key details like dates, parties involved, and what outcome you're hoping for."
                required></textarea>
              <p class="form-text">Your information is kept confidential.</p>
            </div>

            <div class="form-group">
              <label for="urgency" class="form-label form-label-required">How urgent is your situation?</label>
              <select id="urgency" name="urgency" class="form-control form-select" required>
                <option value="">Select urgency level...</option>
                <option value="emergency">Emergency - Need help today</option>
                <option value="urgent">Urgent - Court date or deadline within 1 week</option>
                <option value="soon">Soon - Need help within 2-4 weeks</option>
                <option value="planning">Planning ahead - No immediate deadline</option>
              </select>
            </div>

            <div class="form-group">
              <label for="county" class="form-label form-label-required">What county do you live in?</label>
              <select id="county" name="county" class="form-control form-select" required>
                <option value="">Select your county...</option>
                <option value="harris">Harris County</option>
                <option value="dallas">Dallas County</option>
                <option value="tarrant">Tarrant County</option>
                <option value="bexar">Bexar County</option>
                <option value="travis">Travis County</option>
                <option value="collin">Collin County</option>
                <option value="hidalgo">Hidalgo County</option>
                <option value="el-paso">El Paso County</option>
                <option value="denton">Denton County</option>
                <option value="fort-bend">Fort Bend County</option>
                <option value="other">Other Texas County</option>
                <option value="out-of-state">Outside of Texas</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">Have you already tried to get help?</label>
              <div class="form-check">
                <input type="checkbox" id="prior_attorney" name="prior_help[]" value="attorney"
                  class="form-check-input">
                <label for="prior_attorney" class="form-check-label">I've spoken with an attorney</label>
              </div>
              <div class="form-check">
                <input type="checkbox" id="prior_legal_aid" name="prior_help[]" value="legal_aid"
                  class="form-check-input">
                <label for="prior_legal_aid" class="form-check-label">I've contacted another legal aid
                  organization</label>
              </div>
              <div class="form-check">
                <input type="checkbox" id="prior_none" name="prior_help[]" value="none" class="form-check-input">
                <label for="prior_none" class="form-check-label">This is my first time seeking legal help</label>
              </div>
            </div>

            <div class="flex justify-between">
              <button type="button" class="btn btn-outline" data-step-prev>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" data-step-next>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step 3: Contact Information -->
          <div class="form-step" data-step="3" style="display: none;">
            <h2 class="text-xl font-bold text-primary-700 mb-4">How can we reach you?</h2>
            <p class="text-gray-600 mb-6">We'll use this information to connect you with a legal aid provider and send
              updates about your case.</p>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="form-group">
                <label for="first_name" class="form-label form-label-required">First Name</label>
                <input type="text" id="first_name" name="first_name" class="form-control" required
                  autocomplete="given-name">
              </div>

              <div class="form-group">
                <label for="last_name" class="form-label form-label-required">Last Name</label>
                <input type="text" id="last_name" name="last_name" class="form-control" required
                  autocomplete="family-name">
              </div>
            </div>

            <div class="form-group">
              <label for="email" class="form-label form-label-required">Email Address</label>
              <input type="email" id="email" name="email" class="form-control" required autocomplete="email"
                placeholder="you@example.com">
            </div>

            <div class="form-group">
              <label for="phone" class="form-label form-label-required">Phone Number</label>
              <input type="tel" id="phone" name="phone" class="form-control" required autocomplete="tel"
                placeholder="(512) 555-1234">
              <p class="form-text">We may call or text you about your case.</p>
            </div>

            <div class="form-group">
              <label for="preferred_contact" class="form-label">Preferred Contact Method</label>
              <select id="preferred_contact" name="preferred_contact" class="form-control form-select">
                <option value="phone">Phone call</option>
                <option value="text">Text message</option>
                <option value="email">Email</option>
              </select>
            </div>

            <div class="form-group">
              <label for="best_time" class="form-label">Best Time to Reach You</label>
              <select id="best_time" name="best_time" class="form-control form-select">
                <option value="anytime">Anytime</option>
                <option value="morning">Morning (8am - 12pm)</option>
                <option value="afternoon">Afternoon (12pm - 5pm)</option>
                <option value="evening">Evening (5pm - 8pm)</option>
              </select>
            </div>

            <div class="form-group">
              <label for="preferred_language" class="form-label">Preferred Language</label>
              <select id="preferred_language" name="preferred_language" class="form-control form-select">
                <option value="english">English</option>
                <option value="spanish">EspaÃ±ol (Spanish)</option>
                <option value="vietnamese">Tiáº¿ng Viá»‡t (Vietnamese)</option>
                <option value="chinese">ä¸­æ–‡ (Chinese)</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="flex justify-between">
              <button type="button" class="btn btn-outline" data-step-prev>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="button" class="btn btn-primary" data-step-next>
                Continue
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step 4: Review & Submit -->
          <div class="form-step" data-step="4" style="display: none;">
            <h2 class="text-xl font-bold text-primary-700 mb-4">Review Your Request</h2>
            <p class="text-gray-600 mb-6">Please review the information below before submitting. You can go back to make
              changes if needed.</p>

            <div class="bg-gray-50 rounded-lg p-4 mb-6">
              <h3 class="font-semibold text-primary-800 mb-3">Your Information</h3>
              <dl class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
                <div>
                  <dt class="text-gray-500">Name</dt>
                  <dd class="font-medium" id="review-name">-</dd>
                </div>
                <div>
                  <dt class="text-gray-500">Email</dt>
                  <dd class="font-medium" id="review-email">-</dd>
                </div>
                <div>
                  <dt class="text-gray-500">Phone</dt>
                  <dd class="font-medium" id="review-phone">-</dd>
                </div>
                <div>
                  <dt class="text-gray-500">County</dt>
                  <dd class="font-medium" id="review-county">-</dd>
                </div>
                <div class="sm:col-span-2">
                  <dt class="text-gray-500">Legal Issue</dt>
                  <dd class="font-medium" id="review-issue">-</dd>
                </div>
              </dl>
            </div>

            <!-- Consent Checkboxes -->
            <div class="form-group">
              <div class="form-check">
                <input type="checkbox" id="consent_share" name="consent_share" class="form-check-input" required>
                <label for="consent_share" class="form-check-label">
                  I consent to share my information with legal aid providers who may be able to help with my case. <span
                    class="text-red-600">*</span>
                </label>
              </div>
            </div>

            <div class="form-group">
              <div class="form-check">
                <input type="checkbox" id="consent_contact" name="consent_contact" class="form-check-input" required>
                <label for="consent_contact" class="form-check-label">
                  I consent to be contacted by phone, text, or email about my <span class="whitespace-nowrap">case.<span class="text-red-600">*</span></span>
                </label>
              </div>
            </div>

            <div class="form-group">
              <div class="form-check">
                <input type="checkbox" id="consent_terms" name="consent_terms" class="form-check-input" required>
                <label for="consent_terms" class="form-check-label">
                  I have read and agree to the <a href="terms-of-use.html" target="_blank"
                    class="text-primary-600">Terms of Use</a> and <a href="privacy-policy.html" target="_blank"
                    class="text-primary-600">Privacy <span class="whitespace-nowrap">Policy</a>.<span class="text-red-600">*</span></span>
                </label>
              </div>
            </div>

            <div class="alert alert-info mb-6">
              <svg class="alert-icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                <path fill-rule="evenodd"
                  d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                  clip-rule="evenodd" />
              </svg>
              <div class="alert-content">
                <p class="alert-title">What happens next?</p>
                <p class="text-sm">After you submit, you'll receive a confirmation email with your case reference
                  number. A legal aid provider will review your request and contact you within 1-3 business days.</p>
              </div>
            </div>

            <div class="flex justify-between">
              <button type="button" class="btn btn-outline" data-step-prev>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 17l-5-5m0 0l5-5m-5 5h12" />
                </svg>
                Back
              </button>
              <button type="submit" class="btn btn-primary btn-lg">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Submit Request
              </button>
            </div>
          </div>
        </form>

      </div>
    </section>

    <!-- CTA Section -->
    <section class="section cta-section bg-primary-700 text-white text-center" aria-labelledby="cta-title">
      <div class="container">
        <h2 id="cta-title" class="text-2xl md:text-3xl font-bold mb-4 text-white">Need Help?</h2>
        <p class="text-lg opacity-90 max-w-2xl mx-auto mb-8">If you prefer to speak with someone directly, call us. One of our knowledgeable agents is available to take your call 24/7.</p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <a href="tel:+15129942800" class="btn btn-secondary flex flex-col items-center px-4 py-2"
            data-track-cta="get-help-cta-call">
            <span class="text-4xl font-black text-gray-900">512-994-2800</span>
            <span class="text-xl text-gray-800 flex items-center gap-1 -mt-1">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
              </svg>
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              Text or Call 24/7
            </span>
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="flex flex-col md:flex-row gap-8 items-start">
        <!-- Left Column: Logo -->
        <div class="flex-shrink-0">
          <img src="images/TLA_Logo_Seal.jpg" alt="Texas Legal Aid" width="170" height="170" class="rounded-full">
        </div>

        <!-- Middle Column: Text Content -->
        <div class="flex-1 text-base opacity-90">
          <p class="mb-4">Connecting those in need with free legal services. We are committed to the vision that all Texans, regardless of income, will have equal access to the civil justice system. This site is intended for the benefit of Texans who need legal aid assistance.</p>
          <p class="mb-4">This site is for general informational purposes only. The information on this site is not legal advice and should not be used in place of legal advice. Consult a lawyer for legal advice.</p>
          <p class="mb-4">This site is not a government-funded or government-operated site.</p>
          <nav class="flex flex-wrap gap-4 mb-4 justify-center">
            <a href="privacy-policy.html" class="hover:opacity-80">Privacy Policy</a>  |  
            <a href="terms-of-use.html" class="hover:opacity-80">Terms of Use</a>  |  
            <a href="site-map.html" class="hover:opacity-80">Site Map</a>
          </nav>
          <p class="text-center">Copyright &copy; <span id="copyright-year"></span> Texas Legal Aid. All rights reserved.</p>
        </div>

        <!-- Right Column: Quick Links -->
        <div class="flex-shrink-0">
          <h3 class="text-white font-semibold mb-4">Quick Links</h3>
          <nav class="footer-nav flex-col">
            <a href="index.html">Home</a>
            <a href="apply-online.html">Apply Online</a>
            <a href="my-cases.html">My Cases</a>
            <a href="resources.html">Resources</a>
            <a href="portal/index.html">Provider Portal</a>
          </nav>
        </div>
      </div>
    </div>
  </footer>

  <!-- Dynamic Copyright Year -->
  <script>
    document.getElementById('copyright-year').textContent = new Date().getFullYear();
  </script>

  <!-- Main JavaScript -->
  <script src="js/main.js"></script>

  <!-- Step 1 Continue Button Enable Script -->
  <script>
    // Enable Continue button on Step 1 when a legal area is selected
    // Show age question only when Public Benefits is selected
    // Show Medicare question only when Public Benefits + Age "No" is selected
    // Show Medicare dispute question only when Public Benefits + Age "No" + Medicare "Yes" is selected
    document.addEventListener('DOMContentLoaded', function() {
      const legalAreaInputs = document.querySelectorAll('input[name="legal_area"]');
      const step1ContinueBtn = document.getElementById('step1-continue');
      const ageQuestion = document.getElementById('age-question');
      const ageInputs = document.querySelectorAll('input[name="age_60_or_older"]');
      const medicareQuestion = document.getElementById('medicare-question');
      const medicareInputs = document.querySelectorAll('input[name="has_medicare"]');
      const medicareDisputeQuestion = document.getElementById('medicare-dispute-question');
      const medicareDisputeInputs = document.querySelectorAll('input[name="medicare_dispute"]');

      // Housing & Debt sub-question elements
      const housingTypeQuestion = document.getElementById('housing-type-question');
      const housingTypeInputs = document.querySelectorAll('input[name="housing_type"]');
      const housingSexualAssaultQuestion = document.getElementById('housing-sexual-assault-question');
      const housingSexualAssaultInputs = document.querySelectorAll('input[name="housing_sexual_assault"]');

      // Family Law sub-question elements
      const familySafetyQuestion = document.getElementById('family-safety-question');
      const familySafetyInputs = document.querySelectorAll('input[name="family_safety"]');

      // Military & Benefits sub-question elements
      const militaryVeteranQuestion = document.getElementById('military-veteran-question');
      const militaryVeteranInputs = document.querySelectorAll('input[name="military_is_veteran"]');
      const militaryVeteranTypeQuestion = document.getElementById('military-veteran-type-question');
      const militaryVeteranTypeInputs = document.querySelectorAll('input[name="military_veteran_type"]');
      const militaryGuardianshipQuestion = document.getElementById('military-guardianship-question');
      const militaryGuardianshipInputs = document.querySelectorAll('input[name="military_has_guardianship"]');

      // Violence & Abuse sub-question elements
      const violenceSexualAssaultQuestion = document.getElementById('violence-sexual-assault-question');
      const violenceSexualAssaultInputs = document.querySelectorAll('input[name="violence_sexual_assault"]');

      // Function to check if Continue should be enabled
      function updateContinueButton() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
        if (!selectedLegalArea) {
          step1ContinueBtn.disabled = true;
          return;
        }

        // If Public Benefits is selected, require age question to be answered
        if (selectedLegalArea.value === 'benefits') {
          const ageSelected = document.querySelector('input[name="age_60_or_older"]:checked');
          if (!ageSelected) {
            step1ContinueBtn.disabled = true;
            return;
          }
          // If age is "No", also require Medicare question to be answered
          if (ageSelected.value === 'no') {
            const medicareSelected = document.querySelector('input[name="has_medicare"]:checked');
            if (!medicareSelected) {
              step1ContinueBtn.disabled = true;
              return;
            }
            // If Medicare is "Yes", also require Medicare dispute question to be answered
            if (medicareSelected.value === 'yes') {
              const disputeSelected = document.querySelector('input[name="medicare_dispute"]:checked');
              step1ContinueBtn.disabled = !disputeSelected;
            } else {
              step1ContinueBtn.disabled = false;
            }
          } else {
            step1ContinueBtn.disabled = false;
          }
        } else if (selectedLegalArea.value === 'housing') {
          // Housing & Debt: require housing type to be selected
          const housingTypeSelected = document.querySelector('input[name="housing_type"]:checked');
          if (!housingTypeSelected) {
            step1ContinueBtn.disabled = true;
            return;
          }
          // If early_termination, also require sexual assault question
          if (housingTypeSelected.value === 'early_termination') {
            const sexualAssaultSelected = document.querySelector('input[name="housing_sexual_assault"]:checked');
            step1ContinueBtn.disabled = !sexualAssaultSelected;
          } else {
            step1ContinueBtn.disabled = false;
          }
        } else if (selectedLegalArea.value === 'family') {
          // Family Law: require safety question to be selected
          const familySafetySelected = document.querySelector('input[name="family_safety"]:checked');
          step1ContinueBtn.disabled = !familySafetySelected;
        } else if (selectedLegalArea.value === 'military') {
          // Military & Benefits: require veteran question to be answered
          const militaryVeteranSelected = document.querySelector('input[name="military_is_veteran"]:checked');
          if (!militaryVeteranSelected) {
            step1ContinueBtn.disabled = true;
            return;
          }
          // If veteran = yes, require veteran type question
          if (militaryVeteranSelected.value === 'yes') {
            const militaryVeteranTypeSelected = document.querySelector('input[name="military_veteran_type"]:checked');
            if (!militaryVeteranTypeSelected) {
              step1ContinueBtn.disabled = true;
              return;
            }
            // If dependent_over_18, require guardianship question
            if (militaryVeteranTypeSelected.value === 'dependent_over_18') {
              const militaryGuardianshipSelected = document.querySelector('input[name="military_has_guardianship"]:checked');
              step1ContinueBtn.disabled = !militaryGuardianshipSelected;
            } else {
              step1ContinueBtn.disabled = false;
            }
          } else {
            step1ContinueBtn.disabled = false;
          }
        } else if (selectedLegalArea.value === 'violence') {
          // Violence & Abuse: require sexual assault question to be answered
          const violenceSexualAssaultSelected = document.querySelector('input[name="violence_sexual_assault"]:checked');
          step1ContinueBtn.disabled = !violenceSexualAssaultSelected;
        } else {
          step1ContinueBtn.disabled = false;
        }
      }

      // Function to update Medicare question visibility
      function updateMedicareVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
        const ageSelected = document.querySelector('input[name="age_60_or_older"]:checked');

        // Show Medicare question only if Public Benefits is selected AND age is "No"
        if (selectedLegalArea && selectedLegalArea.value === 'benefits' && ageSelected && ageSelected.value === 'no') {
          medicareQuestion.style.display = 'block';
          medicareInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          medicareQuestion.style.display = 'none';
          medicareInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      // Function to update Medicare dispute question visibility
      function updateMedicareDisputeVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
        const ageSelected = document.querySelector('input[name="age_60_or_older"]:checked');
        const medicareSelected = document.querySelector('input[name="has_medicare"]:checked');

        // Show Medicare dispute question only if Public Benefits + Age "No" + Medicare "Yes"
        if (selectedLegalArea && selectedLegalArea.value === 'benefits' &&
            ageSelected && ageSelected.value === 'no' &&
            medicareSelected && medicareSelected.value === 'yes') {
          medicareDisputeQuestion.style.display = 'block';
          medicareDisputeInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          medicareDisputeQuestion.style.display = 'none';
          medicareDisputeInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      // Function to update Housing type question visibility
      function updateHousingTypeVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

        // Show Housing type question only if Housing & Debt is selected
        if (selectedLegalArea && selectedLegalArea.value === 'housing') {
          housingTypeQuestion.style.display = 'block';
          housingTypeInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          housingTypeQuestion.style.display = 'none';
          housingTypeInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
          // Also hide sexual assault question
          housingSexualAssaultQuestion.style.display = 'none';
          housingSexualAssaultInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      // Function to update Housing sexual assault question visibility
      function updateHousingSexualAssaultVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
        const housingTypeSelected = document.querySelector('input[name="housing_type"]:checked');

        // Show sexual assault question only if Housing + early_termination
        if (selectedLegalArea && selectedLegalArea.value === 'housing' &&
            housingTypeSelected && housingTypeSelected.value === 'early_termination') {
          housingSexualAssaultQuestion.style.display = 'block';
          housingSexualAssaultInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          housingSexualAssaultQuestion.style.display = 'none';
          housingSexualAssaultInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      // Function to update Family Law safety question visibility
      function updateFamilySafetyVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

        // Show Family Law safety question only if Family Law is selected
        if (selectedLegalArea && selectedLegalArea.value === 'family') {
          familySafetyQuestion.style.display = 'block';
          familySafetyInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          familySafetyQuestion.style.display = 'none';
          familySafetyInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      // Function to update Military & Benefits veteran question visibility
      function updateMilitaryVeteranVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

        // Show Military veteran question only if Military & Benefits is selected
        if (selectedLegalArea && selectedLegalArea.value === 'military') {
          militaryVeteranQuestion.style.display = 'block';
          militaryVeteranInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          militaryVeteranQuestion.style.display = 'none';
          militaryVeteranInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
          // Also hide veteran type and guardianship questions
          militaryVeteranTypeQuestion.style.display = 'none';
          militaryVeteranTypeInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
          militaryGuardianshipQuestion.style.display = 'none';
          militaryGuardianshipInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      // Function to update Military veteran type question visibility
      function updateMilitaryVeteranTypeVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
        const militaryVeteranSelected = document.querySelector('input[name="military_is_veteran"]:checked');

        // Show veteran type question only if Military + veteran = yes
        if (selectedLegalArea && selectedLegalArea.value === 'military' &&
            militaryVeteranSelected && militaryVeteranSelected.value === 'yes') {
          militaryVeteranTypeQuestion.style.display = 'block';
          militaryVeteranTypeInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          militaryVeteranTypeQuestion.style.display = 'none';
          militaryVeteranTypeInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
          // Also hide guardianship question
          militaryGuardianshipQuestion.style.display = 'none';
          militaryGuardianshipInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      // Function to update Military guardianship question visibility
      function updateMilitaryGuardianshipVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
        const militaryVeteranSelected = document.querySelector('input[name="military_is_veteran"]:checked');
        const militaryVeteranTypeSelected = document.querySelector('input[name="military_veteran_type"]:checked');

        // Show guardianship question only if Military + veteran = yes + type = dependent_over_18
        if (selectedLegalArea && selectedLegalArea.value === 'military' &&
            militaryVeteranSelected && militaryVeteranSelected.value === 'yes' &&
            militaryVeteranTypeSelected && militaryVeteranTypeSelected.value === 'dependent_over_18') {
          militaryGuardianshipQuestion.style.display = 'block';
          militaryGuardianshipInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          militaryGuardianshipQuestion.style.display = 'none';
          militaryGuardianshipInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      // Function to update Violence & Abuse sexual assault question visibility
      function updateViolenceSexualAssaultVisibility() {
        const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

        // Show sexual assault question only if Violence & Abuse is selected
        if (selectedLegalArea && selectedLegalArea.value === 'violence') {
          violenceSexualAssaultQuestion.style.display = 'block';
          violenceSexualAssaultInputs.forEach(input => input.setAttribute('required', ''));
        } else {
          violenceSexualAssaultQuestion.style.display = 'none';
          violenceSexualAssaultInputs.forEach(input => {
            input.removeAttribute('required');
            input.checked = false;
          });
        }
      }

      if (legalAreaInputs.length > 0 && step1ContinueBtn) {
        legalAreaInputs.forEach(input => {
          input.addEventListener('change', function() {
            // Show age question only for Public Benefits
            if (this.value === 'benefits') {
              ageQuestion.style.display = 'block';
              // Make age question required
              ageInputs.forEach(ageInput => ageInput.setAttribute('required', ''));
            } else {
              ageQuestion.style.display = 'none';
              // Remove required attribute and clear selection
              ageInputs.forEach(ageInput => {
                ageInput.removeAttribute('required');
                ageInput.checked = false;
              });
            }
            updateMedicareVisibility();
            updateMedicareDisputeVisibility();
            updateHousingTypeVisibility();
            updateHousingSexualAssaultVisibility();
            updateFamilySafetyVisibility();
            updateMilitaryVeteranVisibility();
            updateViolenceSexualAssaultVisibility();
            updateContinueButton();
          });
        });

        // Also listen for changes on age question
        ageInputs.forEach(input => {
          input.addEventListener('change', function() {
            updateMedicareVisibility();
            updateMedicareDisputeVisibility();
            updateContinueButton();
          });
        });

        // Also listen for changes on Medicare question
        medicareInputs.forEach(input => {
          input.addEventListener('change', function() {
            updateMedicareDisputeVisibility();
            updateContinueButton();
          });
        });

        // Also listen for changes on Medicare dispute question
        medicareDisputeInputs.forEach(input => {
          input.addEventListener('change', updateContinueButton);
        });

        // Also listen for changes on Housing type question
        housingTypeInputs.forEach(input => {
          input.addEventListener('change', function() {
            updateHousingSexualAssaultVisibility();
            updateContinueButton();
          });
        });

        // Also listen for changes on Housing sexual assault question
        housingSexualAssaultInputs.forEach(input => {
          input.addEventListener('change', updateContinueButton);
        });

        // Also listen for changes on Family Law safety question
        familySafetyInputs.forEach(input => {
          input.addEventListener('change', updateContinueButton);
        });

        // Also listen for changes on Military veteran question
        militaryVeteranInputs.forEach(input => {
          input.addEventListener('change', function() {
            updateMilitaryVeteranTypeVisibility();
            updateContinueButton();
          });
        });

        // Also listen for changes on Military veteran type question
        militaryVeteranTypeInputs.forEach(input => {
          input.addEventListener('change', function() {
            updateMilitaryGuardianshipVisibility();
            updateContinueButton();
          });
        });

        // Also listen for changes on Military guardianship question
        militaryGuardianshipInputs.forEach(input => {
          input.addEventListener('change', updateContinueButton);
        });

        // Also listen for changes on Violence & Abuse sexual assault question
        violenceSexualAssaultInputs.forEach(input => {
          input.addEventListener('change', updateContinueButton);
        });
      }
    });
  </script>

  <!-- Public Benefits Age 60+ Flow Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const step1ContinueBtn = document.getElementById('step1-continue');
      const pbSubmitBtn = document.getElementById('pb-submit-btn');
      const stepPbContact = document.getElementById('step-pb-contact');
      const stepThankYou = document.getElementById('step-thank-you');
      const step1 = document.querySelector('[data-step="1"]');
      const urgentNotification = document.getElementById('urgent-notification');
      const familyHelpLinkCard = document.getElementById('family-help-link-card');

      // Override Step 1 Continue for Public Benefits + Age 60+ = Yes path
      // Now routes to Household Info instead of directly to Contact Info
      if (step1ContinueBtn) {
        step1ContinueBtn.addEventListener('click', function(e) {
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
          const ageSelected = document.querySelector('input[name="age_60_or_older"]:checked');

          // If Public Benefits + Age 60+ = Yes, go to Household Info (125% threshold)
          if (selectedLegalArea && selectedLegalArea.value === 'benefits' &&
              ageSelected && ageSelected.value === 'yes') {
            e.preventDefault();
            e.stopPropagation();

            // Hide Step 1, show Household Info
            step1.style.display = 'none';
            const stepHouseholdInfo = document.getElementById('step-household-info');
            if (stepHouseholdInfo) stepHouseholdInfo.style.display = 'block';

            // Hide urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'none';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

            // Scroll to top of form
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          }
          // Otherwise, let the default step navigation handle it
        });
      }

      // Handle Submit Application button on Step 2 (pb-contact) - kept for legacy
      if (pbSubmitBtn) {
        pbSubmitBtn.addEventListener('click', function() {
          // Validate required fields
          const referralSource = document.getElementById('pb_referral_source');
          const firstName = document.getElementById('pb_first_name');
          const lastName = document.getElementById('pb_last_name');

          if (!referralSource.value) {
            referralSource.focus();
            return;
          }
          if (!firstName.value.trim()) {
            firstName.focus();
            return;
          }
          if (!lastName.value.trim()) {
            lastName.focus();
            return;
          }

          // Hide Step 2, show Thank You
          stepPbContact.style.display = 'none';
          stepThankYou.style.display = 'block';

          // Scroll to top
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Handle Back button on Step 2 (pb-contact) - kept for legacy
      const pbBackBtn = stepPbContact?.querySelector('[data-step-prev]');
      if (pbBackBtn) {
        pbBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();

          // Hide Step 2, show Step 1
          stepPbContact.style.display = 'none';
          step1.style.display = 'block';

          // Show urgent notification and Family Help Link card again
          if (urgentNotification) urgentNotification.style.display = 'flex';
          if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';

          // Scroll to top
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }
    });
  </script>

  <!-- Public Benefits Household Info Flow Script (for Age No + Medicare No path) -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const step1ContinueBtn = document.getElementById('step1-continue');
      const stepHouseholdInfo = document.getElementById('step-household-info');
      const stepContactInfo = document.getElementById('step-pb-contact-no-medicare');
      const stepThankYou = document.getElementById('step-thank-you');
      const step1 = document.querySelector('[data-step="1"]');
      const urgentNotification = document.getElementById('urgent-notification');
      const familyHelpLinkCard = document.getElementById('family-help-link-card');
      const householdBackBtn = document.getElementById('household-back-btn');
      const householdContinueBtn = document.getElementById('household-continue-btn');
      const householdSizeSelect = document.getElementById('household_size');
      const householdIncomeInput = document.getElementById('household_income');
      const incomeFrequencySelect = document.getElementById('income_frequency');
      const incomeYearSelect = document.getElementById('income_year');
      const povertyPercentDisplay = document.getElementById('poverty-percent-display');
      const annualIncomeDisplay = document.getElementById('annual-income-display');
      const householdSizeDisplay = document.getElementById('household-size-display');
      const incomeYearDisplay = document.getElementById('income-year-display');

      // Contact Info step elements
      const contactBackBtn = document.getElementById('pb-nm-contact-back-btn');
      const contactSubmitBtn = document.getElementById('pb-nm-submit-btn');

      // Store poverty guideline data
      let povertyGuidelines = {};
      let calculatedPovertyPercent = null;

      // Populate year dropdown (current year down to 2021)
      function populateYearDropdown() {
        if (!incomeYearSelect) return;
        const currentYear = new Date().getFullYear();
        incomeYearSelect.innerHTML = '';
        for (let year = currentYear; year >= 2021; year--) {
          const option = document.createElement('option');
          option.value = year;
          option.textContent = year;
          if (year === currentYear) option.selected = true;
          incomeYearSelect.appendChild(option);
        }
      }
      populateYearDropdown();

      // Fetch poverty guidelines from HHS API
      async function fetchPovertyGuideline(year, householdSize) {
        try {
          const response = await fetch(`https://aspe.hhs.gov/topics/poverty-economic-mobility/poverty-guidelines/api/${year}/US/${householdSize}`);
          if (response.ok) {
            const data = await response.json();
            // The API returns the annual poverty guideline
            // We need to convert to monthly by dividing by 12
            if (data && data.data && data.data.income) {
              return data.data.income / 12;
            }
          }
          return null;
        } catch (error) {
          console.log(`Error fetching poverty guideline for year ${year}:`, error);
          return null;
        }
      }

      // Calculate poverty percent
      async function calculatePovertyPercent() {
        const householdSize = parseInt(householdSizeSelect.value);
        const incomeValue = parseFloat(householdIncomeInput.value);
        const frequency = incomeFrequencySelect ? incomeFrequencySelect.value : 'monthly';
        const selectedYear = incomeYearSelect ? parseInt(incomeYearSelect.value) : new Date().getFullYear();

        // Update household size display
        if (householdSizeDisplay) {
          householdSizeDisplay.textContent = householdSize ? householdSize : '--';
        }

        // Update year display
        if (incomeYearDisplay) {
          incomeYearDisplay.textContent = selectedYear ? selectedYear : '--';
        }

        if (!householdSize || isNaN(incomeValue)) {
          povertyPercentDisplay.textContent = '--';
          if (annualIncomeDisplay) annualIncomeDisplay.textContent = '--';
          calculatedPovertyPercent = null;
          return;
        }

        // Convert income to annual based on frequency
        let annualIncome;
        if (frequency === 'weekly') {
          annualIncome = incomeValue * 52;
        } else if (frequency === 'monthly') {
          annualIncome = incomeValue * 12;
        } else {
          // yearly
          annualIncome = incomeValue;
        }

        // Display annual income
        if (annualIncomeDisplay) {
          annualIncomeDisplay.textContent = '$' + Math.round(annualIncome).toLocaleString();
        }

        // Use the user-selected year for the poverty guideline API call
        let annualPovertyLevel = await fetchPovertyGuideline(selectedYear, householdSize);

        if (!annualPovertyLevel) {
          // Try previous year if selected year not available
          annualPovertyLevel = await fetchPovertyGuideline(selectedYear - 1, householdSize);
        }

        // Note: fetchPovertyGuideline returns monthly value (divided by 12), so multiply back
        if (annualPovertyLevel) {
          annualPovertyLevel = annualPovertyLevel * 12;
        }

        if (annualPovertyLevel) {
          // Calculate poverty percent: (annual income / annual poverty level) * 100
          calculatedPovertyPercent = Math.round((annualIncome / annualPovertyLevel) * 100);
          povertyPercentDisplay.textContent = calculatedPovertyPercent + '%';
        } else {
          // Fallback to 2024 federal poverty guidelines for 48 contiguous states
          const fallbackPovertyLevels = {
            1: 15060, 2: 20440, 3: 25820, 4: 31200, 5: 36580,
            6: 41960, 7: 47340, 8: 52720
          };
          // For households > 8, add $5,380 per additional person
          let fallbackAnnualLevel;
          if (householdSize <= 8) {
            fallbackAnnualLevel = fallbackPovertyLevels[householdSize];
          } else {
            fallbackAnnualLevel = fallbackPovertyLevels[8] + (householdSize - 8) * 5380;
          }
          calculatedPovertyPercent = Math.round((annualIncome / fallbackAnnualLevel) * 100);
          povertyPercentDisplay.textContent = calculatedPovertyPercent + '%';
        }
      }

      // Listen for changes to household size, income, frequency, and year
      if (householdSizeSelect) {
        householdSizeSelect.addEventListener('change', calculatePovertyPercent);
      }
      if (householdIncomeInput) {
        householdIncomeInput.addEventListener('input', calculatePovertyPercent);
      }
      if (incomeFrequencySelect) {
        incomeFrequencySelect.addEventListener('change', calculatePovertyPercent);
      }
      if (incomeYearSelect) {
        incomeYearSelect.addEventListener('change', calculatePovertyPercent);
      }

      // Override Step 1 Continue for Public Benefits paths that go to Household Info
      if (step1ContinueBtn) {
        step1ContinueBtn.addEventListener('click', function(e) {
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
          const ageSelected = document.querySelector('input[name="age_60_or_older"]:checked');
          const medicareSelected = document.querySelector('input[name="has_medicare"]:checked');
          const medicareDisputeSelected = document.querySelector('input[name="medicare_dispute"]:checked');

          // Check if this is a Public Benefits path that should go to Household Info:
          // Path 1: Public Benefits + Age 60+ = No + Medicare = No
          // Path 2: Public Benefits + Age 60+ = No + Medicare = Yes + Medicare Dispute = No
          const isPublicBenefits = selectedLegalArea && selectedLegalArea.value === 'benefits';
          const isAgeNo = ageSelected && ageSelected.value === 'no';
          const isMedicareNo = medicareSelected && medicareSelected.value === 'no';
          const isMedicareYesDisputeNo = medicareSelected && medicareSelected.value === 'yes' &&
                                          medicareDisputeSelected && medicareDisputeSelected.value === 'no';

          if (isPublicBenefits && isAgeNo && (isMedicareNo || isMedicareYesDisputeNo)) {
            e.preventDefault();
            e.stopPropagation();

            // Hide Step 1 and any other steps that might be showing
            step1.style.display = 'none';

            // Explicitly hide the Age 60+ Contact Info step (step-pb-contact) to prevent overlap
            const stepPbContact = document.getElementById('step-pb-contact');
            if (stepPbContact) stepPbContact.style.display = 'none';

            // Hide the No Medicare Contact Info step as well
            if (stepContactInfo) stepContactInfo.style.display = 'none';

            // Show Household Info step
            stepHouseholdInfo.style.display = 'block';

            // Hide urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'none';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

            // Scroll to top of form
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      // Handle Back button on Household Info step
      if (householdBackBtn) {
        householdBackBtn.addEventListener('click', function(e) {
          e.preventDefault();

          // Hide Household Info step
          stepHouseholdInfo.style.display = 'none';

          // Check if we came from Public Benefits path
          const publicBenefitsAgeAnswerBack = document.querySelector('input[name="age_60_or_older"]:checked');
          const selectedLegalAreaBack = document.querySelector('input[name="legal_area"]:checked');
          if (selectedLegalAreaBack && selectedLegalAreaBack.value === 'benefits' && publicBenefitsAgeAnswerBack) {
            // Public Benefits -> Go back to Step 1
            step1.style.display = 'block';
            // Show urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'flex';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';
          // Check if we came from Violence & Abuse path
          } else {
            const violenceSexualAssaultAnswerBack = document.querySelector('input[name="violence_sexual_assault"]:checked');
            if (violenceSexualAssaultAnswerBack) {
              // Violence & Abuse -> Go back to Step 1
              step1.style.display = 'block';
              // Show urgent notification and Family Help Link card
              if (urgentNotification) urgentNotification.style.display = 'flex';
              if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';
            // Check if we came from Military & Benefits path (any path - all go through Household Info)
            } else {
            const militaryIsVeteranAnswerBack = document.querySelector('input[name="military_is_veteran"]:checked');
            if (militaryIsVeteranAnswerBack) {
              // All Military paths -> Go back to Step 1
              step1.style.display = 'block';
              // Show urgent notification and Family Help Link card
              if (urgentNotification) urgentNotification.style.display = 'flex';
              if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';
            // Check if we came from Elder Law path
            } else {
              const elderIsVeteranAnswer = document.querySelector('input[name="elder_is_veteran"]:checked');
              if (elderIsVeteranAnswer) {
                // Go back to Elder Law Veterans step
                const stepElderVeterans = document.getElementById('step-elder-veterans');
                if (stepElderVeterans) stepElderVeterans.style.display = 'block';
              // Check if we came from Criminal Record path
              } else {
                const crIsVeteranAnswer = document.querySelector('input[name="cr_is_veteran"]:checked');
                if (crIsVeteranAnswer && crIsVeteranAnswer.value === 'yes') {
                  // Go back to CR Veterans step
                  const stepCrVeterans = document.getElementById('step-cr-veterans');
                  if (stepCrVeterans) stepCrVeterans.style.display = 'block';
              // Check if we came from Family Law path
              } else {
                const familySafetyAnswer = document.querySelector('input[name="family_safety"]:checked');
                const familyBestFitAnswer = document.querySelector('input[name="family_best_fit"]:checked');

                if (familySafetyAnswer && familySafetyAnswer.value === 'yes') {
                  // Family Law safety = yes -> Go back to Step 1
                  step1.style.display = 'block';
                  // Show urgent notification and Family Help Link card
                  if (urgentNotification) urgentNotification.style.display = 'flex';
                  if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';
                } else if (familyBestFitAnswer) {
                  // Family Law safety = no, answered best fit -> Go back to Best Fit step
                  const stepFamilyBestFit = document.getElementById('step-family-best-fit');
                  if (stepFamilyBestFit) stepFamilyBestFit.style.display = 'block';
                } else {
                  // Check if we came from Housing paths
                  const housingTypeAnswer = document.querySelector('input[name="housing_type"]:checked');
                  const housingSexualAssaultAnswer = document.querySelector('input[name="housing_sexual_assault"]:checked');
                  const housingIsVeteranAnswer = document.querySelector('input[name="housing_is_veteran"]:checked');
                  const housingAge60Answer = document.querySelector('input[name="housing_age_60"]:checked');

                  if (housingTypeAnswer) {
                    if (housingTypeAnswer.value === 'identity_theft') {
                      // Housing identity_theft -> Go back to Step 1
                      step1.style.display = 'block';
                      if (urgentNotification) urgentNotification.style.display = 'flex';
                      if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';
                    } else if (housingTypeAnswer.value === 'early_termination' && housingSexualAssaultAnswer && housingSexualAssaultAnswer.value === 'yes') {
                      // Housing early_termination + sexual assault = yes -> Go back to Step 1
                      step1.style.display = 'block';
                      if (urgentNotification) urgentNotification.style.display = 'flex';
                      if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';
                    } else if (housingAge60Answer) {
                      // Housing Age 60+ -> Go back to Housing Age 60+ step
                      const stepHousingAge60 = document.getElementById('step-housing-age-60');
                      if (stepHousingAge60) stepHousingAge60.style.display = 'block';
                    } else if (housingIsVeteranAnswer && housingIsVeteranAnswer.value === 'yes') {
                      // Housing Veterans -> Go back to Housing Veterans step
                      const stepHousingVeterans = document.getElementById('step-housing-veterans');
                      if (stepHousingVeterans) stepHousingVeterans.style.display = 'block';
                    } else {
                      // Default: Go back to Step 1
                      step1.style.display = 'block';
                      if (urgentNotification) urgentNotification.style.display = 'flex';
                      if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';
                    }
                  } else {
                    // Default: Go back to Step 1
                    step1.style.display = 'block';
                    // Show urgent notification and Family Help Link card again
                    if (urgentNotification) urgentNotification.style.display = 'flex';
                    if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';
                  }
                }
                }
              }
              }
            }
          }
          }

          // Scroll to top
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Handle Continue button on Household Info step - check poverty level
      if (householdContinueBtn) {
        householdContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();

          // Validate required fields
          if (!householdSizeSelect.value) {
            householdSizeSelect.focus();
            return;
          }
          if (!householdIncomeInput.value || isNaN(parseFloat(householdIncomeInput.value))) {
            householdIncomeInput.focus();
            return;
          }

          // Store poverty percent in a global variable for form submission
          window.calculatedPovertyPercent = calculatedPovertyPercent;

          // Check if we came from Elder Law path (via elder_is_veteran selection)
          const elderIsVeteranAnswer = document.querySelector('input[name="elder_is_veteran"]:checked');

          if (elderIsVeteranAnswer) {
            // Elder Law path - uses 200% poverty threshold
            if (calculatedPovertyPercent > 200) {
              // Redirect to not-eligible-resources.html and disable back button
              window.location.replace('not-eligible-resources.html');
              return;
            }

            // Elder Law + poverty â‰¤ 200% -> Contact Info directly
            stepHouseholdInfo.style.display = 'none';
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // Check if we came from Family Law path (via family_safety selection)
          const familySafetyAnswer = document.querySelector('input[name="family_safety"]:checked');

          if (familySafetyAnswer) {
            // Family Law path - uses 125% poverty threshold
            if (calculatedPovertyPercent > 125) {
              // Redirect to not-eligible-resources.html and disable back button
              window.location.replace('not-eligible-resources.html');
              return;
            }

            // Family Law + poverty â‰¤ 125% -> Contact Info directly
            stepHouseholdInfo.style.display = 'none';
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // Check if we came from Military & Benefits path
          const militaryIsVeteranAnswer = document.querySelector('input[name="military_is_veteran"]:checked');
          const militaryVeteranTypeAnswer = document.querySelector('input[name="military_veteran_type"]:checked');

          if (militaryIsVeteranAnswer) {
            if (militaryIsVeteranAnswer.value === 'no') {
              // Military & Benefits non-veteran path - uses 125% poverty threshold
              if (calculatedPovertyPercent > 125) {
                window.location.replace('not-eligible-resources.html');
                return;
              }
              // Military non-veteran + poverty â‰¤ 125% -> Contact Info directly
              stepHouseholdInfo.style.display = 'none';
              stepContactInfo.style.display = 'block';
              populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            } else if (militaryIsVeteranAnswer.value === 'yes' && militaryVeteranTypeAnswer) {
              // Military & Benefits veteran path - check veteran type for threshold
              const veteranType = militaryVeteranTypeAnswer.value;

              if (veteranType === 'veteran' || veteranType === 'spouse') {
                // Veteran or spouse - uses 200% poverty threshold
                if (calculatedPovertyPercent > 200) {
                  window.location.replace('not-eligible-resources.html');
                  return;
                }
                // Military veteran/spouse + poverty â‰¤ 200% -> Contact Info directly
                stepHouseholdInfo.style.display = 'none';
                stepContactInfo.style.display = 'block';
                populateContactInfoIncomeValues();
                document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
                return;
              } else if (veteranType === 'dependent_under_18' || veteranType === 'dependent_over_18') {
                // Dependents - uses 125% poverty threshold
                if (calculatedPovertyPercent > 125) {
                  window.location.replace('not-eligible-resources.html');
                  return;
                }
                // Military dependent + poverty â‰¤ 125% -> Contact Info directly
                stepHouseholdInfo.style.display = 'none';
                stepContactInfo.style.display = 'block';
                populateContactInfoIncomeValues();
                document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
                return;
              }
            }
          }

          // Check if we came from Violence & Abuse path
          const violenceSexualAssaultAnswer = document.querySelector('input[name="violence_sexual_assault"]:checked');

          if (violenceSexualAssaultAnswer) {
            if (violenceSexualAssaultAnswer.value === 'yes') {
              // Violence & Abuse + sexual assault = yes - uses 200% poverty threshold
              if (calculatedPovertyPercent > 200) {
                window.location.replace('not-eligible-resources.html');
                return;
              }
              // Violence + sexual assault = yes + poverty â‰¤ 200% -> Contact Info directly
              stepHouseholdInfo.style.display = 'none';
              stepContactInfo.style.display = 'block';
              populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            } else {
              // Violence & Abuse + sexual assault = no - uses 125% poverty threshold
              if (calculatedPovertyPercent > 125) {
                window.location.replace('not-eligible-resources.html');
                return;
              }
              // Violence + sexual assault = no + poverty â‰¤ 125% -> Contact Info directly
              stepHouseholdInfo.style.display = 'none';
              stepContactInfo.style.display = 'block';
              populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            }
          }

          // Check if we came from Public Benefits path (via age_60_or_older selection)
          const publicBenefitsAgeAnswer = document.querySelector('input[name="age_60_or_older"]:checked');
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

          if (selectedLegalArea && selectedLegalArea.value === 'benefits' && publicBenefitsAgeAnswer) {
            // Public Benefits path - uses 125% poverty threshold, goes directly to Contact Info
            if (calculatedPovertyPercent > 125) {
              window.location.replace('not-eligible-resources.html');
              return;
            }
            // Public Benefits + poverty â‰¤ 125% -> Contact Info directly
            stepHouseholdInfo.style.display = 'none';
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // Check if we came from Criminal Record Expungement path
          const crIsVeteranAnswer = document.querySelector('input[name="cr_is_veteran"]:checked');
          const crVeteranTypeAnswer = document.querySelector('input[name="cr_veteran_type"]:checked');

          if (crIsVeteranAnswer && crIsVeteranAnswer.value === 'yes' && crVeteranTypeAnswer) {
            const crVeteranType = crVeteranTypeAnswer.value;

            if (crVeteranType === 'veteran' || crVeteranType === 'spouse' || crVeteranType === 'dependent_under_18') {
              // CR veteran/spouse/dependent_under_18 - uses 200% poverty threshold
              if (calculatedPovertyPercent > 200) {
                window.location.replace('not-eligible-resources.html');
                return;
              }
              // CR veteran/spouse/dependent_under_18 + poverty â‰¤ 200% -> Contact Info
              stepHouseholdInfo.style.display = 'none';
              stepContactInfo.style.display = 'block';
              populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            } else if (crVeteranType === 'dependent_over_18') {
              // CR dependent_over_18 with guardianship = yes - uses 125% poverty threshold
              if (calculatedPovertyPercent > 125) {
                window.location.replace('not-eligible-resources.html');
                return;
              }
              // CR dependent_over_18 + guardianship yes + poverty â‰¤ 125% -> Contact Info
              stepHouseholdInfo.style.display = 'none';
              stepContactInfo.style.display = 'block';
              populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            }
          }

          // Check if we came from Housing & Debt path
          const housingTypeAnswer = document.querySelector('input[name="housing_type"]:checked');
          const housingSexualAssaultAnswer = document.querySelector('input[name="housing_sexual_assault"]:checked');
          const housingIsVeteranAnswer = document.querySelector('input[name="housing_is_veteran"]:checked');
          const housingVeteranTypeAnswer = document.querySelector('input[name="housing_veteran_type"]:checked');
          const housingAge60Answer = document.querySelector('input[name="housing_age_60"]:checked');

          if (housingTypeAnswer) {
            // Housing + identity_theft - uses 125% poverty threshold
            if (housingTypeAnswer.value === 'identity_theft') {
              if (calculatedPovertyPercent > 125) {
                window.location.replace('not-eligible-resources.html');
                return;
              }
              // Housing identity_theft + poverty â‰¤ 125% -> Contact Info
              stepHouseholdInfo.style.display = 'none';
              stepContactInfo.style.display = 'block';
              populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            }

            // Housing + early_termination + sexual assault = yes - uses 187.5% poverty threshold
            if (housingTypeAnswer.value === 'early_termination' && housingSexualAssaultAnswer && housingSexualAssaultAnswer.value === 'yes') {
              if (calculatedPovertyPercent > 187.5) {
                window.location.replace('not-eligible-resources.html');
                return;
              }
              // Housing early_termination + sexual assault + poverty â‰¤ 187.5% -> Contact Info
              stepHouseholdInfo.style.display = 'none';
              stepContactInfo.style.display = 'block';
              populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            }

            // Housing + Age 60+ = yes - uses 125% poverty threshold
            if (housingAge60Answer && housingAge60Answer.value === 'yes') {
              if (calculatedPovertyPercent > 125) {
                window.location.replace('not-eligible-resources.html');
                return;
              }
              // Housing Age 60+ + poverty â‰¤ 125% -> Contact Info
              stepHouseholdInfo.style.display = 'none';
              stepContactInfo.style.display = 'block';
              populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            }

            // Housing + Veterans = yes - check veteran type for threshold
            if (housingIsVeteranAnswer && housingIsVeteranAnswer.value === 'yes' && housingVeteranTypeAnswer) {
              const housingVeteranType = housingVeteranTypeAnswer.value;

              if (housingVeteranType === 'veteran' || housingVeteranType === 'spouse' || housingVeteranType === 'dependent_under_18') {
                // Housing veteran/spouse/dependent_under_18 - uses 200% poverty threshold
                if (calculatedPovertyPercent > 200) {
                  window.location.replace('not-eligible-resources.html');
                  return;
                }
                // Housing veteran/spouse/dependent_under_18 + poverty â‰¤ 200% -> Contact Info
                stepHouseholdInfo.style.display = 'none';
                stepContactInfo.style.display = 'block';
                populateContactInfoIncomeValues();
                document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
                return;
              } else if (housingVeteranType === 'dependent_over_18') {
                // Housing dependent_over_18 with guardianship = yes - uses 125% poverty threshold
                if (calculatedPovertyPercent > 125) {
                  window.location.replace('not-eligible-resources.html');
                  return;
                }
                // Housing dependent_over_18 + guardianship yes + poverty â‰¤ 125% -> Contact Info
                stepHouseholdInfo.style.display = 'none';
                stepContactInfo.style.display = 'block';
                populateContactInfoIncomeValues();
                document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
                return;
              }
            }
          }

          // Default path (shouldn't normally reach here) - uses 125% poverty threshold
          if (calculatedPovertyPercent > 125) {
            window.location.replace('not-eligible-resources.html');
            return;
          }

          // Default -> Contact Info
          stepHouseholdInfo.style.display = 'none';
          stepContactInfo.style.display = 'block';
          populateContactInfoIncomeValues();

          // Scroll to top
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Screening Question Steps - Element references
      const stepCrimeVictim = document.getElementById('step-crime-victim');
      const stepVeterans = document.getElementById('step-veterans');
      const stepChildCare = document.getElementById('step-child-care');

      // Enable/disable buttons based on radio selection for screening questions
      const crimeVictimRadios = document.querySelectorAll('input[name="crime_victim"]');
      const crimeVictimContinueBtn = document.getElementById('crime-victim-continue-btn');
      crimeVictimRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (crimeVictimContinueBtn) crimeVictimContinueBtn.disabled = false;
        });
      });

      const veteransRadios = document.querySelectorAll('input[name="is_veteran"]');
      const veteransContinueBtn = document.getElementById('veterans-continue-btn');
      const veteranTypeQuestion = document.getElementById('veteran-type-question');
      const guardianshipQuestion = document.getElementById('guardianship-question');
      const veteranTypeRadios = document.querySelectorAll('input[name="veteran_type"]');
      const guardianshipRadios = document.querySelectorAll('input[name="has_guardianship"]');

      // Clear radio selection helper
      function clearRadioGroup(name) {
        document.querySelectorAll(`input[name="${name}"]`).forEach(r => r.checked = false);
      }

      // Populate Contact Info income/poverty values from Household Info
      function populateContactInfoIncomeValues() {
        const contactHouseholdSizeDisplay = document.getElementById('contact-household-size-display');
        const contactAnnualIncomeDisplay = document.getElementById('contact-annual-income-display');
        const contactIncomeYearDisplay = document.getElementById('contact-income-year-display');
        const contactPovertyPercentDisplay = document.getElementById('contact-poverty-percent-display');

        if (contactHouseholdSizeDisplay && householdSizeDisplay) {
          contactHouseholdSizeDisplay.textContent = householdSizeDisplay.textContent;
        }
        if (contactAnnualIncomeDisplay && annualIncomeDisplay) {
          contactAnnualIncomeDisplay.textContent = annualIncomeDisplay.textContent;
        }
        if (contactIncomeYearDisplay && incomeYearDisplay) {
          contactIncomeYearDisplay.textContent = incomeYearDisplay.textContent;
        }
        if (contactPovertyPercentDisplay && povertyPercentDisplay) {
          contactPovertyPercentDisplay.textContent = povertyPercentDisplay.textContent;
        }
      }

      // Veterans Yes/No change handler
      veteransRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === 'yes') {
            // Show veteran type question
            if (veteranTypeQuestion) veteranTypeQuestion.style.display = 'block';
            // Clear and hide guardianship question
            clearRadioGroup('has_guardianship');
            if (guardianshipQuestion) guardianshipQuestion.style.display = 'none';
            // Disable continue until veteran type is selected
            if (veteransContinueBtn) veteransContinueBtn.disabled = true;
          } else {
            // Hide both conditional questions
            if (veteranTypeQuestion) veteranTypeQuestion.style.display = 'none';
            if (guardianshipQuestion) guardianshipQuestion.style.display = 'none';
            // Clear selections
            clearRadioGroup('veteran_type');
            clearRadioGroup('has_guardianship');
            // Enable continue
            if (veteransContinueBtn) veteransContinueBtn.disabled = false;
          }
        });
      });

      // Veteran type change handler
      veteranTypeRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (this.value === 'dependent_over_18') {
            // Show guardianship question
            if (guardianshipQuestion) guardianshipQuestion.style.display = 'block';
            // Disable continue until guardianship is answered
            if (veteransContinueBtn) veteransContinueBtn.disabled = true;
          } else {
            // Hide guardianship question
            if (guardianshipQuestion) guardianshipQuestion.style.display = 'none';
            clearRadioGroup('has_guardianship');
            // Enable continue
            if (veteransContinueBtn) veteransContinueBtn.disabled = false;
          }
        });
      });

      // Guardianship change handler
      guardianshipRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          // Enable continue when guardianship is answered
          if (veteransContinueBtn) veteransContinueBtn.disabled = false;
        });
      });

      const childCareRadios = document.querySelectorAll('input[name="child_care"]');
      const childCareContinueBtn = document.getElementById('child-care-continue-btn');
      childCareRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          if (childCareContinueBtn) childCareContinueBtn.disabled = false;
        });
      });

      // Crime Victim Back Button - go back to Household Info
      const crimeVictimBackBtn = document.getElementById('crime-victim-back-btn');
      if (crimeVictimBackBtn) {
        crimeVictimBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          if (stepCrimeVictim) stepCrimeVictim.style.display = 'none';
          stepHouseholdInfo.style.display = 'block';
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Crime Victim Continue Button
      if (crimeVictimContinueBtn) {
        crimeVictimContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const selected = document.querySelector('input[name="crime_victim"]:checked');
          if (!selected) return;

          if (stepCrimeVictim) stepCrimeVictim.style.display = 'none';

          if (selected.value === 'yes') {
            // Go to Contact Info
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
          } else {
            // Go to Veterans question
            if (stepVeterans) stepVeterans.style.display = 'block';
          }
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Veterans Back Button - go back to Crime Victim
      const veteransBackBtn = document.getElementById('veterans-back-btn');
      if (veteransBackBtn) {
        veteransBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          // Reset conditional questions
          if (veteranTypeQuestion) veteranTypeQuestion.style.display = 'none';
          if (guardianshipQuestion) guardianshipQuestion.style.display = 'none';
          clearRadioGroup('is_veteran');
          clearRadioGroup('veteran_type');
          clearRadioGroup('has_guardianship');
          if (veteransContinueBtn) veteransContinueBtn.disabled = true;

          if (stepVeterans) stepVeterans.style.display = 'none';
          if (stepCrimeVictim) stepCrimeVictim.style.display = 'block';
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Veterans Continue Button
      if (veteransContinueBtn) {
        veteransContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const isVeteranSelected = document.querySelector('input[name="is_veteran"]:checked');
          if (!isVeteranSelected) return;

          if (isVeteranSelected.value === 'no') {
            // Go to Child Care question
            if (stepVeterans) stepVeterans.style.display = 'none';
            if (stepChildCare) stepChildCare.style.display = 'block';
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // is_veteran = yes, check veteran_type
          const veteranTypeSelected = document.querySelector('input[name="veteran_type"]:checked');
          if (!veteranTypeSelected) return;

          const veteranType = veteranTypeSelected.value;

          // First 3 options (veteran, spouse, dependent_under_18) -> Contact Info
          if (veteranType === 'veteran' || veteranType === 'spouse' || veteranType === 'dependent_under_18') {
            if (stepVeterans) stepVeterans.style.display = 'none';
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // dependent_over_18 -> check guardianship
          if (veteranType === 'dependent_over_18') {
            const guardianshipSelected = document.querySelector('input[name="has_guardianship"]:checked');
            if (!guardianshipSelected) return;

            if (guardianshipSelected.value === 'yes') {
              // Go to Contact Info
              if (stepVeterans) stepVeterans.style.display = 'none';
              stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
            } else {
              // Go to Child Care question
              if (stepVeterans) stepVeterans.style.display = 'none';
              if (stepChildCare) stepChildCare.style.display = 'block';
            }
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // Other -> Go to Child Care question
          if (veteranType === 'other') {
            if (stepVeterans) stepVeterans.style.display = 'none';
            if (stepChildCare) stepChildCare.style.display = 'block';
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }
        });
      }

      // Child Care Back Button - go back to Veterans
      const childCareBackBtn = document.getElementById('child-care-back-btn');
      if (childCareBackBtn) {
        childCareBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          // Reset child care selection
          clearRadioGroup('child_care');
          if (childCareContinueBtn) childCareContinueBtn.disabled = true;

          if (stepChildCare) stepChildCare.style.display = 'none';
          if (stepVeterans) stepVeterans.style.display = 'block';
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Child Care Continue Button
      if (childCareContinueBtn) {
        childCareContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const selected = document.querySelector('input[name="child_care"]:checked');
          if (!selected) return;

          if (stepChildCare) stepChildCare.style.display = 'none';

          if (selected.value === 'yes') {
            // Go to Contact Info
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          } else {
            // Child care = no: check poverty percent
            // If poverty <= 125%, go to Contact Info; otherwise redirect to not-eligible-resources
            if (calculatedPovertyPercent !== null && calculatedPovertyPercent <= 125) {
              stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            } else {
              // Redirect to not-eligible-resources.html and disable back button
              window.location.replace('not-eligible-resources.html');
            }
          }
        });
      }

      // =====================================================
      // Criminal Record Expungement Flow
      // =====================================================
      const stepDefenseAttorney = document.getElementById('step-defense-attorney');
      const stepCrVeterans = document.getElementById('step-cr-veterans');
      const stepHouseholdInfo = document.getElementById('step-household-info');
      const defenseAttorneyBackBtn = document.getElementById('defense-attorney-back-btn');
      const defenseAttorneyContinueBtn = document.getElementById('defense-attorney-continue-btn');
      const crVeteransBackBtn = document.getElementById('cr-veterans-back-btn');
      const crVeteransContinueBtn = document.getElementById('cr-veterans-continue-btn');
      const texasCrimeQuestion = document.getElementById('texas-crime-question');
      const crVeteranTypeQuestion = document.getElementById('cr-veteran-type-question');
      const crGuardianshipQuestion = document.getElementById('cr-guardianship-question');

      // Step 1 Continue for Criminal Record Expungement
      if (step1ContinueBtn) {
        step1ContinueBtn.addEventListener('click', function(e) {
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

          // If Criminal Record is selected, go to Defense Attorney question
          if (selectedLegalArea && selectedLegalArea.value === 'criminal-record') {
            e.preventDefault();
            e.stopPropagation();

            step1.style.display = 'none';
            stepDefenseAttorney.style.display = 'block';

            // Hide urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'none';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      // Defense Attorney radio change - show/hide Texas crime question
      const defenseAttorneyInputs = document.querySelectorAll('input[name="defense_attorney"]');
      const texasCrimeInputs = document.querySelectorAll('input[name="texas_crime"]');

      defenseAttorneyInputs.forEach(input => {
        input.addEventListener('change', function() {
          if (this.value === 'no') {
            texasCrimeQuestion.style.display = 'block';
            // Disable continue until texas_crime is answered
            defenseAttorneyContinueBtn.disabled = true;
          } else {
            texasCrimeQuestion.style.display = 'none';
            // Clear texas_crime selection
            clearRadioGroup('texas_crime');
            // Enable continue for 'yes' (will redirect to not-eligible)
            defenseAttorneyContinueBtn.disabled = false;
          }
        });
      });

      texasCrimeInputs.forEach(input => {
        input.addEventListener('change', function() {
          defenseAttorneyContinueBtn.disabled = false;
        });
      });

      // Defense Attorney Back Button
      if (defenseAttorneyBackBtn) {
        defenseAttorneyBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepDefenseAttorney.style.display = 'none';
          step1.style.display = 'block';

          // Show urgent notification and Family Help Link card
          if (urgentNotification) urgentNotification.style.display = 'flex';
          if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';

          // Clear selections
          clearRadioGroup('defense_attorney');
          clearRadioGroup('texas_crime');
          texasCrimeQuestion.style.display = 'none';
          defenseAttorneyContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Defense Attorney Continue Button
      if (defenseAttorneyContinueBtn) {
        defenseAttorneyContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const defenseSelected = document.querySelector('input[name="defense_attorney"]:checked');
          if (!defenseSelected) return;

          if (defenseSelected.value === 'yes') {
            // Looking for defense attorney -> not eligible
            window.location.replace('not-eligible-resources.html');
            return;
          }

          // Defense attorney = no, check Texas crime
          const texasCrimeSelected = document.querySelector('input[name="texas_crime"]:checked');
          if (!texasCrimeSelected) return;

          if (texasCrimeSelected.value === 'no') {
            // Crime not in Texas -> not eligible
            window.location.replace('not-eligible-resources.html');
            return;
          }

          // Texas crime = yes -> go to CR Veterans question
          stepDefenseAttorney.style.display = 'none';
          stepCrVeterans.style.display = 'block';
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // CR Veterans radio change - show/hide veteran type question
      const crIsVeteranInputs = document.querySelectorAll('input[name="cr_is_veteran"]');
      const crVeteranTypeInputs = document.querySelectorAll('input[name="cr_veteran_type"]');
      const crGuardianshipInputs = document.querySelectorAll('input[name="cr_has_guardianship"]');

      crIsVeteranInputs.forEach(input => {
        input.addEventListener('change', function() {
          if (this.value === 'yes') {
            crVeteranTypeQuestion.style.display = 'block';
            // Disable continue until veteran_type is answered
            crVeteransContinueBtn.disabled = true;
          } else {
            crVeteranTypeQuestion.style.display = 'none';
            crGuardianshipQuestion.style.display = 'none';
            // Clear selections
            clearRadioGroup('cr_veteran_type');
            clearRadioGroup('cr_has_guardianship');
            // Enable continue for 'no' (will redirect to not-eligible)
            crVeteransContinueBtn.disabled = false;
          }
        });
      });

      crVeteranTypeInputs.forEach(input => {
        input.addEventListener('change', function() {
          if (this.value === 'dependent_over_18') {
            crGuardianshipQuestion.style.display = 'block';
            crVeteransContinueBtn.disabled = true;
          } else {
            crGuardianshipQuestion.style.display = 'none';
            clearRadioGroup('cr_has_guardianship');
            crVeteransContinueBtn.disabled = false;
          }
        });
      });

      crGuardianshipInputs.forEach(input => {
        input.addEventListener('change', function() {
          crVeteransContinueBtn.disabled = false;
        });
      });

      // CR Veterans Back Button
      if (crVeteransBackBtn) {
        crVeteransBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepCrVeterans.style.display = 'none';
          stepDefenseAttorney.style.display = 'block';

          // Clear CR veteran selections
          clearRadioGroup('cr_is_veteran');
          clearRadioGroup('cr_veteran_type');
          clearRadioGroup('cr_has_guardianship');
          crVeteranTypeQuestion.style.display = 'none';
          crGuardianshipQuestion.style.display = 'none';
          crVeteransContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // CR Veterans Continue Button
      if (crVeteransContinueBtn) {
        crVeteransContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const crIsVeteranSelected = document.querySelector('input[name="cr_is_veteran"]:checked');
          if (!crIsVeteranSelected) return;

          if (crIsVeteranSelected.value === 'no') {
            // Not a veteran -> not eligible
            window.location.replace('not-eligible-resources.html');
            return;
          }

          // Is veteran = yes, check veteran type
          const crVeteranTypeSelected = document.querySelector('input[name="cr_veteran_type"]:checked');
          if (!crVeteranTypeSelected) return;

          const crVeteranType = crVeteranTypeSelected.value;

          // First 3 options (veteran, spouse, dependent_under_18) -> Household Info (200% threshold)
          if (crVeteranType === 'veteran' || crVeteranType === 'spouse' || crVeteranType === 'dependent_under_18') {
            stepCrVeterans.style.display = 'none';
            stepHouseholdInfo.style.display = 'block';
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // dependent_over_18 -> check guardianship
          if (crVeteranType === 'dependent_over_18') {
            const crGuardianshipSelected = document.querySelector('input[name="cr_has_guardianship"]:checked');
            if (!crGuardianshipSelected) return;

            stepCrVeterans.style.display = 'none';
            if (crGuardianshipSelected.value === 'yes') {
              // Guardianship = yes -> Household Info (125% threshold)
              stepHouseholdInfo.style.display = 'block';
            } else {
              // No guardianship -> not eligible
              window.location.replace('not-eligible-resources.html');
            }
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // Other -> not eligible
          if (crVeteranType === 'other') {
            window.location.replace('not-eligible-resources.html');
            return;
          }
        });
      }

      // =====================================================
      // Housing & Debt Flow
      // =====================================================
      const stepHousingVeterans = document.getElementById('step-housing-veterans');
      const housingVeteransBackBtn = document.getElementById('housing-veterans-back-btn');
      const housingVeteransContinueBtn = document.getElementById('housing-veterans-continue-btn');
      const housingVeteranTypeQuestion = document.getElementById('housing-veteran-type-question');
      const housingGuardianshipQuestion = document.getElementById('housing-guardianship-question');

      // Step 1 Continue for Housing & Debt
      if (step1ContinueBtn) {
        step1ContinueBtn.addEventListener('click', function(e) {
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

          // If Housing is selected
          if (selectedLegalArea && selectedLegalArea.value === 'housing') {
            e.preventDefault();
            e.stopPropagation();

            const housingTypeSelected = document.querySelector('input[name="housing_type"]:checked');
            if (!housingTypeSelected) return;

            // If identity_theft, go to Household Info (125% threshold)
            if (housingTypeSelected.value === 'identity_theft') {
              step1.style.display = 'none';
              stepHouseholdInfo.style.display = 'block';

              // Hide urgent notification and Family Help Link card
              if (urgentNotification) urgentNotification.style.display = 'none';
              if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            }

            // If early_termination + sexual_assault = yes, go to Household Info (187.5% threshold)
            if (housingTypeSelected.value === 'early_termination') {
              const sexualAssaultSelected = document.querySelector('input[name="housing_sexual_assault"]:checked');
              if (sexualAssaultSelected && sexualAssaultSelected.value === 'yes') {
                step1.style.display = 'none';
                stepHouseholdInfo.style.display = 'block';

                // Hide urgent notification and Family Help Link card
                if (urgentNotification) urgentNotification.style.display = 'none';
                if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

                document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
                return;
              }
            }

            // All other Housing paths go to Housing Veterans question
            step1.style.display = 'none';
            stepHousingVeterans.style.display = 'block';

            // Hide urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'none';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      // Housing Veterans radio change - show/hide veteran type question
      const housingIsVeteranInputs = document.querySelectorAll('input[name="housing_is_veteran"]');
      const housingVeteranTypeInputs = document.querySelectorAll('input[name="housing_veteran_type"]');
      const housingGuardianshipInputs = document.querySelectorAll('input[name="housing_has_guardianship"]');

      housingIsVeteranInputs.forEach(input => {
        input.addEventListener('change', function() {
          if (this.value === 'yes') {
            housingVeteranTypeQuestion.style.display = 'block';
            // Disable continue until veteran_type is answered
            housingVeteransContinueBtn.disabled = true;
          } else {
            housingVeteranTypeQuestion.style.display = 'none';
            housingGuardianshipQuestion.style.display = 'none';
            // Clear selections
            clearRadioGroup('housing_veteran_type');
            clearRadioGroup('housing_has_guardianship');
            // Enable continue for 'no' (will redirect to not-eligible)
            housingVeteransContinueBtn.disabled = false;
          }
        });
      });

      housingVeteranTypeInputs.forEach(input => {
        input.addEventListener('change', function() {
          if (this.value === 'dependent_over_18') {
            housingGuardianshipQuestion.style.display = 'block';
            housingVeteransContinueBtn.disabled = true;
          } else {
            housingGuardianshipQuestion.style.display = 'none';
            clearRadioGroup('housing_has_guardianship');
            housingVeteransContinueBtn.disabled = false;
          }
        });
      });

      housingGuardianshipInputs.forEach(input => {
        input.addEventListener('change', function() {
          housingVeteransContinueBtn.disabled = false;
        });
      });

      // Housing Veterans Back Button
      if (housingVeteransBackBtn) {
        housingVeteransBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepHousingVeterans.style.display = 'none';
          step1.style.display = 'block';

          // Show urgent notification and Family Help Link card
          if (urgentNotification) urgentNotification.style.display = 'flex';
          if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';

          // Clear Housing veteran selections
          clearRadioGroup('housing_is_veteran');
          clearRadioGroup('housing_veteran_type');
          clearRadioGroup('housing_has_guardianship');
          housingVeteranTypeQuestion.style.display = 'none';
          housingGuardianshipQuestion.style.display = 'none';
          housingVeteransContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Housing Age 60+ step elements
      const stepHousingAge60 = document.getElementById('step-housing-age-60');
      const housingAge60BackBtn = document.getElementById('housing-age-60-back-btn');
      const housingAge60ContinueBtn = document.getElementById('housing-age-60-continue-btn');
      const housingAge60Inputs = document.querySelectorAll('input[name="housing_age_60"]');

      // Enable Housing Age 60+ Continue button when a selection is made
      housingAge60Inputs.forEach(input => {
        input.addEventListener('change', function() {
          housingAge60ContinueBtn.disabled = false;
        });
      });

      // Housing Age 60+ Back Button
      if (housingAge60BackBtn) {
        housingAge60BackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepHousingAge60.style.display = 'none';
          stepHousingVeterans.style.display = 'block';

          // Clear Housing Age 60 selection
          clearRadioGroup('housing_age_60');
          housingAge60ContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Housing Age 60+ Continue Button
      if (housingAge60ContinueBtn) {
        housingAge60ContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const housingAge60Selected = document.querySelector('input[name="housing_age_60"]:checked');
          if (!housingAge60Selected) return;

          stepHousingAge60.style.display = 'none';
          if (housingAge60Selected.value === 'yes') {
            // Age 60+ = yes -> Household Info (125% threshold)
            stepHouseholdInfo.style.display = 'block';
          } else {
            // Age 60+ = no -> not eligible
            window.location.replace('not-eligible-resources.html');
          }
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Housing Veterans Continue Button
      if (housingVeteransContinueBtn) {
        housingVeteransContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const housingIsVeteranSelected = document.querySelector('input[name="housing_is_veteran"]:checked');
          if (!housingIsVeteranSelected) return;

          // Check housing_type for routing
          const housingTypeSelected = document.querySelector('input[name="housing_type"]:checked');

          if (housingIsVeteranSelected.value === 'no') {
            // If housing_type = something_else OR other_housing and is_veteran = no -> go to Housing Age 60+ question
            if (housingTypeSelected && (housingTypeSelected.value === 'something_else' || housingTypeSelected.value === 'other_housing')) {
              stepHousingVeterans.style.display = 'none';
              stepHousingAge60.style.display = 'block';
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            }
            // Other housing types with is_veteran = no -> not eligible
            window.location.replace('not-eligible-resources.html');
            return;
          }

          // Is veteran = yes, check veteran type
          const housingVeteranTypeSelected = document.querySelector('input[name="housing_veteran_type"]:checked');
          if (!housingVeteranTypeSelected) return;

          const housingVeteranType = housingVeteranTypeSelected.value;

          // First 3 options (veteran, spouse, dependent_under_18) -> Household Info (200% threshold)
          if (housingVeteranType === 'veteran' || housingVeteranType === 'spouse' || housingVeteranType === 'dependent_under_18') {
            stepHousingVeterans.style.display = 'none';
            stepHouseholdInfo.style.display = 'block';
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // dependent_over_18 -> check guardianship
          if (housingVeteranType === 'dependent_over_18') {
            const housingGuardianshipSelected = document.querySelector('input[name="housing_has_guardianship"]:checked');
            if (!housingGuardianshipSelected) return;

            stepHousingVeterans.style.display = 'none';
            if (housingGuardianshipSelected.value === 'yes') {
              // Guardianship = yes -> Household Info (125% threshold)
              stepHouseholdInfo.style.display = 'block';
            } else {
              // No guardianship -> not eligible
              window.location.replace('not-eligible-resources.html');
            }
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // Other -> not eligible
          if (housingVeteranType === 'other') {
            window.location.replace('not-eligible-resources.html');
            return;
          }
        });
      }

      // =====================================================
      // Elder Law Flow
      // =====================================================
      const stepElderDeceased = document.getElementById('step-elder-deceased');
      const elderDeceasedBackBtn = document.getElementById('elder-deceased-back-btn');
      const elderDeceasedContinueBtn = document.getElementById('elder-deceased-continue-btn');
      const elderDeceasedInputs = document.querySelectorAll('input[name="elder_deceased"]');

      const stepElderVeterans = document.getElementById('step-elder-veterans');
      const elderVeteransBackBtn = document.getElementById('elder-veterans-back-btn');
      const elderVeteransContinueBtn = document.getElementById('elder-veterans-continue-btn');
      const elderVeteranTypeQuestion = document.getElementById('elder-veteran-type-question');
      const elderGuardianshipQuestion = document.getElementById('elder-guardianship-question');
      const elderIsVeteranInputs = document.querySelectorAll('input[name="elder_is_veteran"]');
      const elderVeteranTypeInputs = document.querySelectorAll('input[name="elder_veteran_type"]');
      const elderGuardianshipInputs = document.querySelectorAll('input[name="elder_has_guardianship"]');

      const stepElderPension = document.getElementById('step-elder-pension');
      const elderPensionBackBtn = document.getElementById('elder-pension-back-btn');
      const elderPensionContinueBtn = document.getElementById('elder-pension-continue-btn');
      const elderPensionInputs = document.querySelectorAll('input[name="elder_pension"]');
      const elderViolenceQuestion = document.getElementById('elder-violence-question');
      const elderViolenceInputs = document.querySelectorAll('input[name="elder_violence"]');

      const stepElderAge60 = document.getElementById('step-elder-age-60');
      const elderAge60BackBtn = document.getElementById('elder-age-60-back-btn');
      const elderAge60ContinueBtn = document.getElementById('elder-age-60-continue-btn');
      const elderAge60Inputs = document.querySelectorAll('input[name="elder_age_60"]');

      // Step 1 Continue for Elder Law
      if (step1ContinueBtn) {
        step1ContinueBtn.addEventListener('click', function(e) {
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

          // If Elder Law is selected, go to Deceased question
          if (selectedLegalArea && selectedLegalArea.value === 'elder-law') {
            e.preventDefault();
            e.stopPropagation();

            step1.style.display = 'none';
            stepElderDeceased.style.display = 'block';

            // Hide urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'none';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      // Enable Elder Deceased Continue button when a selection is made
      elderDeceasedInputs.forEach(input => {
        input.addEventListener('change', function() {
          elderDeceasedContinueBtn.disabled = false;
        });
      });

      // Elder Deceased Back Button
      if (elderDeceasedBackBtn) {
        elderDeceasedBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepElderDeceased.style.display = 'none';
          step1.style.display = 'block';

          // Show urgent notification and Family Help Link card
          if (urgentNotification) urgentNotification.style.display = 'flex';
          if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';

          // Clear Elder Deceased selection
          clearRadioGroup('elder_deceased');
          elderDeceasedContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Elder Deceased Continue Button
      if (elderDeceasedContinueBtn) {
        elderDeceasedContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const elderDeceasedSelected = document.querySelector('input[name="elder_deceased"]:checked');
          if (!elderDeceasedSelected) return;

          stepElderDeceased.style.display = 'none';
          if (elderDeceasedSelected.value === 'yes') {
            // Deceased = yes -> Elder Veterans question
            stepElderVeterans.style.display = 'block';
          } else {
            // Deceased = no -> Elder Pension question
            stepElderPension.style.display = 'block';
          }
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Elder Veterans radio change - show/hide veteran type question
      elderIsVeteranInputs.forEach(input => {
        input.addEventListener('change', function() {
          if (this.value === 'yes') {
            elderVeteranTypeQuestion.style.display = 'block';
            // Disable continue until veteran_type is answered
            elderVeteransContinueBtn.disabled = true;
          } else {
            elderVeteranTypeQuestion.style.display = 'none';
            elderGuardianshipQuestion.style.display = 'none';
            // Clear selections
            clearRadioGroup('elder_veteran_type');
            clearRadioGroup('elder_has_guardianship');
            // Enable continue for 'no' (will redirect to not-eligible)
            elderVeteransContinueBtn.disabled = false;
          }
        });
      });

      // Elder Veteran Type radio change - show/hide guardianship question
      elderVeteranTypeInputs.forEach(input => {
        input.addEventListener('change', function() {
          if (this.value === 'dependent_over_18') {
            elderGuardianshipQuestion.style.display = 'block';
            elderVeteransContinueBtn.disabled = true;
          } else {
            elderGuardianshipQuestion.style.display = 'none';
            clearRadioGroup('elder_has_guardianship');
            elderVeteransContinueBtn.disabled = false;
          }
        });
      });

      // Elder Guardianship radio change - enable continue
      elderGuardianshipInputs.forEach(input => {
        input.addEventListener('change', function() {
          elderVeteransContinueBtn.disabled = false;
        });
      });

      // Elder Veterans Back Button
      if (elderVeteransBackBtn) {
        elderVeteransBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepElderVeterans.style.display = 'none';
          stepElderDeceased.style.display = 'block';

          // Clear Elder veteran selections
          clearRadioGroup('elder_is_veteran');
          clearRadioGroup('elder_veteran_type');
          clearRadioGroup('elder_has_guardianship');
          elderVeteranTypeQuestion.style.display = 'none';
          elderGuardianshipQuestion.style.display = 'none';
          elderVeteransContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Elder Veterans Continue Button
      if (elderVeteransContinueBtn) {
        elderVeteransContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const elderIsVeteranSelected = document.querySelector('input[name="elder_is_veteran"]:checked');
          if (!elderIsVeteranSelected) return;

          if (elderIsVeteranSelected.value === 'no') {
            // Not a veteran -> not eligible
            window.location.replace('not-eligible-resources.html');
            return;
          }

          // Is veteran = yes, check veteran type
          const elderVeteranTypeSelected = document.querySelector('input[name="elder_veteran_type"]:checked');
          if (!elderVeteranTypeSelected) return;

          const elderVeteranType = elderVeteranTypeSelected.value;

          // First 3 options (veteran, spouse, dependent_under_18) -> Household Info (200% threshold)
          if (elderVeteranType === 'veteran' || elderVeteranType === 'spouse' || elderVeteranType === 'dependent_under_18') {
            stepElderVeterans.style.display = 'none';
            stepHouseholdInfo.style.display = 'block';
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // dependent_over_18 -> check guardianship
          if (elderVeteranType === 'dependent_over_18') {
            const elderGuardianshipSelected = document.querySelector('input[name="elder_has_guardianship"]:checked');
            if (!elderGuardianshipSelected) return;

            if (elderGuardianshipSelected.value === 'yes') {
              // Guardianship = yes -> Household Info (200% threshold)
              stepElderVeterans.style.display = 'none';
              stepHouseholdInfo.style.display = 'block';
            } else {
              // Guardianship = no -> not eligible
              window.location.replace('not-eligible-resources.html');
            }
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // Other -> not eligible
          if (elderVeteranType === 'other') {
            window.location.replace('not-eligible-resources.html');
            return;
          }
        });
      }

      // Elder Pension radio change - show/hide violence question
      elderPensionInputs.forEach(input => {
        input.addEventListener('change', function() {
          if (this.value === 'no') {
            elderViolenceQuestion.style.display = 'block';
            // Disable continue until violence is answered
            elderPensionContinueBtn.disabled = true;
          } else {
            elderViolenceQuestion.style.display = 'none';
            clearRadioGroup('elder_violence');
            // Enable continue for 'yes' (goes to Contact Info)
            elderPensionContinueBtn.disabled = false;
          }
        });
      });

      // Elder Violence radio change - enable continue
      elderViolenceInputs.forEach(input => {
        input.addEventListener('change', function() {
          elderPensionContinueBtn.disabled = false;
        });
      });

      // Elder Pension Back Button
      if (elderPensionBackBtn) {
        elderPensionBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepElderPension.style.display = 'none';
          stepElderDeceased.style.display = 'block';

          // Clear Elder pension selections
          clearRadioGroup('elder_pension');
          clearRadioGroup('elder_violence');
          elderViolenceQuestion.style.display = 'none';
          elderPensionContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Elder Pension Continue Button
      if (elderPensionContinueBtn) {
        elderPensionContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const elderPensionSelected = document.querySelector('input[name="elder_pension"]:checked');
          if (!elderPensionSelected) return;

          if (elderPensionSelected.value === 'yes') {
            // Pension = yes -> Contact Info
            stepElderPension.style.display = 'none';
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
            return;
          }

          // Pension = no, check violence
          const elderViolenceSelected = document.querySelector('input[name="elder_violence"]:checked');
          if (!elderViolenceSelected) return;

          if (elderViolenceSelected.value === 'yes') {
            // Violence = yes -> Contact Info
            stepElderPension.style.display = 'none';
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
          } else {
            // Violence = no -> Elder Age 60+ question
            stepElderPension.style.display = 'none';
            stepElderAge60.style.display = 'block';
          }
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Enable Elder Age 60+ Continue button when a selection is made
      elderAge60Inputs.forEach(input => {
        input.addEventListener('change', function() {
          elderAge60ContinueBtn.disabled = false;
        });
      });

      // Elder Age 60+ Back Button
      if (elderAge60BackBtn) {
        elderAge60BackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepElderAge60.style.display = 'none';
          stepElderPension.style.display = 'block';

          // Clear Elder Age 60 selection
          clearRadioGroup('elder_age_60');
          elderAge60ContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Elder Age 60+ Continue Button
      if (elderAge60ContinueBtn) {
        elderAge60ContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const elderAge60Selected = document.querySelector('input[name="elder_age_60"]:checked');
          if (!elderAge60Selected) return;

          stepElderAge60.style.display = 'none';
          if (elderAge60Selected.value === 'yes') {
            // Age 60+ = yes -> Contact Info
            stepContactInfo.style.display = 'block';
            populateContactInfoIncomeValues();
          } else {
            // Age 60+ = no -> not eligible
            window.location.replace('not-eligible-resources.html');
          }
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // =====================================================
      // Family Law Flow
      // =====================================================
      const stepFamilyBestFit = document.getElementById('step-family-best-fit');
      const familyBestFitBackBtn = document.getElementById('family-best-fit-back-btn');
      const familyBestFitContinueBtn = document.getElementById('family-best-fit-continue-btn');
      const familyBestFitInputs = document.querySelectorAll('input[name="family_best_fit"]');

      // Step 1 Continue for Family Law
      if (step1ContinueBtn) {
        step1ContinueBtn.addEventListener('click', function(e) {
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
          const familySafetySelected = document.querySelector('input[name="family_safety"]:checked');

          // If Family Law is selected
          if (selectedLegalArea && selectedLegalArea.value === 'family' && familySafetySelected) {
            e.preventDefault();
            e.stopPropagation();

            // Hide urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'none';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

            if (familySafetySelected.value === 'yes') {
              // Safety = yes -> Household Info (125% threshold)
              step1.style.display = 'none';
              stepHouseholdInfo.style.display = 'block';
            } else {
              // Safety = no -> Best Fit question
              step1.style.display = 'none';
              stepFamilyBestFit.style.display = 'block';
            }

            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      // Enable Family Best Fit Continue button when a selection is made
      familyBestFitInputs.forEach(input => {
        input.addEventListener('change', function() {
          familyBestFitContinueBtn.disabled = false;
        });
      });

      // Family Best Fit Back Button
      if (familyBestFitBackBtn) {
        familyBestFitBackBtn.addEventListener('click', function(e) {
          e.preventDefault();
          stepFamilyBestFit.style.display = 'none';
          step1.style.display = 'block';

          // Show urgent notification and Family Help Link card
          if (urgentNotification) urgentNotification.style.display = 'flex';
          if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'block';

          // Clear Family Best Fit selection
          clearRadioGroup('family_best_fit');
          familyBestFitContinueBtn.disabled = true;

          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Family Best Fit Continue Button
      if (familyBestFitContinueBtn) {
        familyBestFitContinueBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const familyBestFitSelected = document.querySelector('input[name="family_best_fit"]:checked');
          if (!familyBestFitSelected) return;

          // Both options go to Household Info (125% threshold)
          stepFamilyBestFit.style.display = 'none';
          stepHouseholdInfo.style.display = 'block';
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // =====================================================
      // Military & Benefits Flow
      // =====================================================

      // Step 1 Continue for Military & Benefits
      if (step1ContinueBtn) {
        step1ContinueBtn.addEventListener('click', function(e) {
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
          const militaryVeteranSelected = document.querySelector('input[name="military_is_veteran"]:checked');

          // If Military & Benefits is selected
          if (selectedLegalArea && selectedLegalArea.value === 'military' && militaryVeteranSelected) {
            e.preventDefault();
            e.stopPropagation();

            // Hide urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'none';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

            if (militaryVeteranSelected.value === 'no') {
              // Veteran = no -> Household Info (125% threshold)
              step1.style.display = 'none';
              stepHouseholdInfo.style.display = 'block';
              document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
              return;
            }

            // Veteran = yes, check veteran type
            const militaryVeteranTypeSelected = document.querySelector('input[name="military_veteran_type"]:checked');
            if (!militaryVeteranTypeSelected) return;

            // Check veteran type for routing
            if (militaryVeteranTypeSelected.value === 'other') {
              // Other -> Not Eligible
              window.location.replace('not-eligible-resources.html');
              return;
            }

            if (militaryVeteranTypeSelected.value === 'dependent_over_18') {
              // Dependent over 18 -> Check guardianship
              const militaryGuardianshipSelected = document.querySelector('input[name="military_has_guardianship"]:checked');
              if (!militaryGuardianshipSelected) return;

              if (militaryGuardianshipSelected.value === 'yes') {
                // Guardianship = yes -> Household Info (125% threshold)
                step1.style.display = 'none';
                stepHouseholdInfo.style.display = 'block';
              } else {
                // Guardianship = no -> Not Eligible
                window.location.replace('not-eligible-resources.html');
              }
            } else if (militaryVeteranTypeSelected.value === 'dependent_under_18') {
              // Dependent under 18 -> Household Info (125% threshold)
              step1.style.display = 'none';
              stepHouseholdInfo.style.display = 'block';
            } else {
              // Veteran, spouse -> Household Info (200% threshold)
              step1.style.display = 'none';
              stepHouseholdInfo.style.display = 'block';
            }

            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      // =====================================================
      // Violence & Abuse Flow
      // =====================================================

      // Step 1 Continue for Violence & Abuse
      if (step1ContinueBtn) {
        step1ContinueBtn.addEventListener('click', function(e) {
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');
          const violenceSexualAssaultSelected = document.querySelector('input[name="violence_sexual_assault"]:checked');

          // If Violence & Abuse is selected
          if (selectedLegalArea && selectedLegalArea.value === 'violence' && violenceSexualAssaultSelected) {
            e.preventDefault();
            e.stopPropagation();

            // Hide urgent notification and Family Help Link card
            if (urgentNotification) urgentNotification.style.display = 'none';
            if (familyHelpLinkCard) familyHelpLinkCard.style.display = 'none';

            // Both yes and no go to Household Info (different thresholds handled in Household Info Continue)
            step1.style.display = 'none';
            stepHouseholdInfo.style.display = 'block';
            document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
          }
        });
      }

      // Handle Back button on Contact Info step - navigate back based on path
      if (contactBackBtn) {
        contactBackBtn.addEventListener('click', function(e) {
          e.preventDefault();

          // Hide Contact Info step
          stepContactInfo.style.display = 'none';

          // Determine which step to go back to based on answers
          const crimeVictimAnswer = document.querySelector('input[name="crime_victim"]:checked');
          const veteransAnswer = document.querySelector('input[name="is_veteran"]:checked');
          const childCareAnswer = document.querySelector('input[name="child_care"]:checked');
          const crIsVeteranAnswer = document.querySelector('input[name="cr_is_veteran"]:checked');
          const housingIsVeteranAnswer = document.querySelector('input[name="housing_is_veteran"]:checked');
          const housingTypeAnswer = document.querySelector('input[name="housing_type"]:checked');
          const housingSexualAssaultAnswer = document.querySelector('input[name="housing_sexual_assault"]:checked');
          const housingAge60Answer = document.querySelector('input[name="housing_age_60"]:checked');

          // Elder Law path answers
          const elderIsVeteranAnswer = document.querySelector('input[name="elder_is_veteran"]:checked');
          const elderPensionAnswer = document.querySelector('input[name="elder_pension"]:checked');
          const elderViolenceAnswer = document.querySelector('input[name="elder_violence"]:checked');
          const elderAge60Answer = document.querySelector('input[name="elder_age_60"]:checked');

          // Family Law path answers
          const familySafetyAnswer = document.querySelector('input[name="family_safety"]:checked');

          // Military & Benefits path answers
          const militaryIsVeteranAnswer = document.querySelector('input[name="military_is_veteran"]:checked');
          const militaryVeteranTypeAnswer = document.querySelector('input[name="military_veteran_type"]:checked');

          // Violence & Abuse path answers
          const violenceSexualAssaultAnswer = document.querySelector('input[name="violence_sexual_assault"]:checked');

          // Public Benefits path answers
          const publicBenefitsAgeAnswer = document.querySelector('input[name="age_60_or_older"]:checked');
          const selectedLegalArea = document.querySelector('input[name="legal_area"]:checked');

          // Check if came from Public Benefits path first (now goes through Household Info)
          if (selectedLegalArea && selectedLegalArea.value === 'benefits' && publicBenefitsAgeAnswer) {
            // Public Benefits paths go through Household Info -> go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          // Check if came from Violence & Abuse path
          } else if (violenceSexualAssaultAnswer) {
            // Violence & Abuse paths go through Household Info -> go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          // Check if came from Military & Benefits path
          } else if (militaryIsVeteranAnswer) {
            // All Military paths go through Household Info now -> go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          // Check if came from Family Law path
          } else if (familySafetyAnswer) {
            // Came from Family Law via Household Info
            stepHouseholdInfo.style.display = 'block';
          // Check if came from Elder Law paths
          } else if (elderAge60Answer) {
            // Came from Elder Law Age 60+ (Deceased=No â†’ Pension=No â†’ Violence=No â†’ Age60=Yes)
            const stepElderAge60 = document.getElementById('step-elder-age-60');
            if (stepElderAge60) stepElderAge60.style.display = 'block';
          } else if (elderViolenceAnswer && elderViolenceAnswer.value === 'yes') {
            // Came from Elder Law Violence (Deceased=No â†’ Pension=No â†’ Violence=Yes)
            const stepElderPension = document.getElementById('step-elder-pension');
            if (stepElderPension) stepElderPension.style.display = 'block';
          } else if (elderPensionAnswer && elderPensionAnswer.value === 'yes') {
            // Came from Elder Law Pension (Deceased=No â†’ Pension=Yes)
            const stepElderPension = document.getElementById('step-elder-pension');
            if (stepElderPension) stepElderPension.style.display = 'block';
          } else if (elderIsVeteranAnswer) {
            // Came from Elder Law Veterans path via Household Info
            stepHouseholdInfo.style.display = 'block';
          // Check if came from Housing paths (all Housing paths now go through Household Info)
          } else if (housingTypeAnswer && housingTypeAnswer.value === 'identity_theft') {
            // Housing identity_theft -> go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          } else if (housingTypeAnswer && housingTypeAnswer.value === 'early_termination' &&
              housingSexualAssaultAnswer && housingSexualAssaultAnswer.value === 'yes') {
            // Housing early_termination + sexual assault = yes -> go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          } else if (housingAge60Answer && housingAge60Answer.value === 'yes') {
            // Housing Age 60+ = yes -> go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          } else if (housingIsVeteranAnswer && housingIsVeteranAnswer.value === 'yes') {
            // Housing Veterans = yes -> go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          } else if (crIsVeteranAnswer && crIsVeteranAnswer.value === 'yes') {
            // Came from CR Veterans via Household Info -> go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          } else if (childCareAnswer) {
            // Came from Child Care (either yes or no with poverty <= 125%)
            if (stepChildCare) stepChildCare.style.display = 'block';
          } else if (veteransAnswer && veteransAnswer.value === 'yes') {
            // Came from Veterans
            if (stepVeterans) stepVeterans.style.display = 'block';
          } else if (crimeVictimAnswer && crimeVictimAnswer.value === 'yes') {
            // Came from Crime Victim
            if (stepCrimeVictim) stepCrimeVictim.style.display = 'block';
          } else {
            // Default: go back to Household Info
            stepHouseholdInfo.style.display = 'block';
          }

          // Scroll to top
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }

      // Handle Submit button on Contact Info step - navigate to Thank You
      if (contactSubmitBtn) {
        contactSubmitBtn.addEventListener('click', function(e) {
          e.preventDefault();

          // Validate required fields on Contact Info step
          const referralSource = document.getElementById('pb_nm_referral_source');
          const firstName = document.getElementById('pb_nm_first_name');
          const lastName = document.getElementById('pb_nm_last_name');

          if (!referralSource.value) {
            referralSource.focus();
            return;
          }
          if (!firstName.value.trim()) {
            firstName.focus();
            return;
          }
          if (!lastName.value.trim()) {
            lastName.focus();
            return;
          }

          // Hide all steps
          stepContactInfo.style.display = 'none';
          stepHouseholdInfo.style.display = 'none';
          step1.style.display = 'none';
          if (stepCrimeVictim) stepCrimeVictim.style.display = 'none';
          if (stepVeterans) stepVeterans.style.display = 'none';
          if (stepChildCare) stepChildCare.style.display = 'none';
          const stepPbContact = document.getElementById('step-pb-contact');
          if (stepPbContact) stepPbContact.style.display = 'none';

          // Show Thank You
          stepThankYou.style.display = 'block';

          // Scroll to top
          document.querySelector('#intake-form').scrollIntoView({ behavior: 'smooth' });
        });
      }
    });
  </script>

  <!-- Review Step Population Script -->
  <script>
    // Populate review step when reaching it
    document.querySelectorAll('[data-step-next]').forEach(btn => {
      btn.addEventListener('click', () => {
        const form = document.getElementById('intake-form');
        const firstName = form.querySelector('#first_name')?.value || '';
        const lastName = form.querySelector('#last_name')?.value || '';
        document.getElementById('review-name').textContent = `${firstName} ${lastName}`.trim() || '-';
        document.getElementById('review-email').textContent = form.querySelector('#email')?.value || '-';
        document.getElementById('review-phone').textContent = form.querySelector('#phone')?.value || '-';
        document.getElementById('review-county').textContent = form.querySelector('#county option:checked')?.textContent || '-';

        const legalArea = form.querySelector('input[name="legal_area"]:checked');
        document.getElementById('review-issue').textContent = legalArea ?
          legalArea.parentElement.querySelector('.font-semibold').textContent : '-';
      });
    });
  </script>
</body>

</html>